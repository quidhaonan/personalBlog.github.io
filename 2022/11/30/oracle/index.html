<!DOCTYPE HTML>
<html>

<head>
	<link rel="bookmark"  type="image/x-icon"  href="/img/logo_miccall.png"/>
	<link rel="shortcut icon" href="/img/logo_miccall.png">
	
			    <title>
    Liu Mingyang's personal blog
    </title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="/css/mic_main.css" />
    <link rel="stylesheet" href="/css/dropdownMenu.css" />
    <meta name="keywords" content="miccall" />
    
    	<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
	 
    <noscript>
        <link rel="stylesheet" href="/css/noscript.css" />
    </noscript>
    <style type="text/css">
        body:before {
          content: ' ';
          position: fixed;
          top: 0;
          background: url('/img/bg.jpg') center 0 no-repeat;
          right: 0;
          bottom: 0;
          left: 0;
          background-size: cover; 
        }
    </style>

			    
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script async type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


    <script src="/js/jquery.min.js"></script>
    <script src="/js/jquery.scrollex.min.js"></script>
    <script src="/js/jquery.scrolly.min.js"></script>
    <script src="/js/skel.min.js"></script>
    <script src="/js/util.js"></script>
    <script src="/js/main.js"></script>
	
<meta name="generator" content="Hexo 6.3.0"></head>
    
		
<!-- Layouts -->



<!--  代码渲染  -->
<link rel="stylesheet" href="/css/prism_coy.css" />
<link rel="stylesheet" href="/css/typo.css" />
<!-- 文章页 -->
<body class="is-loading">
    <!-- Wrapper 外包 s-->
    <div id="wrapper" class="fade-in">
        <!-- Intro 头部显示 s -->
        <!-- Intro 头部显示 e -->
        <!-- Header 头部logo start -->
        <header id="header">
    <a href="/" class="logo">MICCALL</a>
</header>
        <!-- Nav 导航条 start -->
        <nav id="nav" class="special" >
            <ul class="menu links" >
			<!-- Homepage  主页  --> 
			<li >
	            <a href="/" rel="nofollow">主页</a>
	        </li>
			<!-- categories_name  分类   --> 
	        
	        <li class="active">
	            <a href="#s1">分类</a>
	                    <ul class="submenu">
	                        <li>
	                        
	                    </ul>
	        </li>
	        
	        <!-- archives  归档   --> 
	        
	        
		        <!-- Pages 自定义   -->
		        
		        <li>
		            <a href="/about/" title="简历">
		                简历
		            </a>
		        </li>
		        
		        <li>
		            <a href="/group/" title="团队">
		                团队
		            </a>
		        </li>
		        
		        <li>
		            <a href="/gallery/" title="图库">
		                图库
		            </a>
		        </li>
		        
		        <li>
		            <a href="/tag/" title="标签">
		                标签
		            </a>
		        </li>
		        


            </ul>
            <!-- icons 图标   -->
			<ul class="icons">
                    
                    <li>
                        <a title="github" href="https://github.com/miccall" target="_blank" rel="noopener">
                            <i class="icon fa fa-github"></i>
                        </a>
                    </li>
                    
                    <li>
                        <a title="500px" href="http://500px.com" target="_blank" rel="noopener">
                            <i class="icon fa fa-500px"></i>
                        </a>
                    </li>
                    
			</ul>
</nav>

        <div id="main" >
            <div class ="post_page_title_img" style="height: 25rem;background-image: url();background-position: center; background-repeat:no-repeat; background-size:cover;-moz-background-size:cover;overflow:hidden;" >
                <a href="#" style="padding: 4rem 4rem 2rem 4rem ;"><h2 >oracle</h2></a>
            </div>
            <!-- Post -->
            <div class="typo" style="padding: 3rem;">
                <h1 id="oracle"><a href="#oracle" class="headerlink" title="oracle"></a><center>oracle</center></h1><p>@[TOC]</p>
<h2 id="一-下载"><a href="#一-下载" class="headerlink" title="一 下载"></a>一 下载</h2><h3 id="1-安装说明"><a href="#1-安装说明" class="headerlink" title="1.安装说明"></a>1.安装说明</h3><p>&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<a target="_blank" rel="noopener" href="https://www.aliyundrive.com/s/WUP8sT12uGD">安装说明</a></p>
<h3 id="2-软件地址"><a href="#2-软件地址" class="headerlink" title="2.软件地址"></a>2.软件地址</h3><p>&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<a target="_blank" rel="noopener" href="https://www.aliyundrive.com/s/yPe6GCFebrq">oracle.exe</a></p>
<h2 id="二-学习"><a href="#二-学习" class="headerlink" title="二 学习"></a>二 学习</h2><table>
<thead>
<tr>
<th>资料</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="https://www.aliyundrive.com/s/H4PkPcu7jid">查询语句.pdf</a></td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://www.aliyundrive.com/s/TuxMwK5UNVS">SQL高级查询.pdf</a></td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://www.aliyundrive.com/s/Z9XzynoAY56">数据库的规范化设计.pptx</a></td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://www.aliyundrive.com/s/qdEDsaFcDv6">SQL查询和SQL函数.pptx</a></td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://www.aliyundrive.com/s/73vgeMY2QaW">PL&#x2F;SQL.pptx</a></td>
</tr>
</tbody></table>
<h2 id="三-oracle-的数据定义"><a href="#三-oracle-的数据定义" class="headerlink" title="三 oracle 的数据定义"></a>三 oracle 的数据定义</h2><h3 id="1-oracle-的数据类型"><a href="#1-oracle-的数据类型" class="headerlink" title="1. oracle 的数据类型"></a>1. oracle 的数据类型</h3><ol>
<li><p>sql 支持下列类别的命令：</p>
<ul>
<li>数据定义语言（DDL）</li>
<li>数据操纵语言（DML）</li>
<li>事务控制语言（TCL）</li>
<li>数据控制语言（DCL）<ul>
<li><pre><code>    DDL：数据的定义（create,drop,alter）
DML：数据的操作（insert,update,delete,select）
TCL：事务控制（commit,rollback,savepoint）
DCL：数据控制（grant,revoke）
</code></pre>
</li>
</ul>
</li>
</ul>
</li>
<li><p>数据的定义主要是一些数据库对象（表，序列，视图，存储过程，触发器……）</p>
<ul>
<li>数据类型<br><img src="https://img-blog.csdnimg.cn/e454164664a241d798232f326e3649e2.png" alt="在这里插入图片描述"></li>
</ul>
<ol>
<li><p>字符</p>
<pre><code> char（定长的）
 varchar2（变长的，4000字节）
 long（变长的，最多可以存储 2GB 的数据）
</code></pre>
</li>
<li><p>数值类型</p>
<pre><code> number(P,S)
     P：总位数
     S：小数部分的位数
     P和S都可以省略
 
 int
     oracle 后面会自动转为 number 进行存储
</code></pre>
</li>
<li><p>日期时间类型</p>
<pre><code> date
 timestamp
</code></pre>
</li>
<li><p>LOB 类型</p>
<pre><code> 存储一些二进制数据（图像，声音，word，excel 文档之类的数据）
 blob
 clob
 raw
 longraw
</code></pre>
</li>
</ol>
</li>
</ol>
<h3 id="2-掌握-DDL-语句"><a href="#2-掌握-DDL-语句" class="headerlink" title="2.掌握 DDL 语句"></a>2.掌握 DDL 语句</h3><ol>
<li><p>create（创建）</p>
<pre><code> create table 表名
 (
     列名 数据类型 约束,
     列名 数据类型 约束,
     列名 数据类型 约束,
     列名 数据类型 约束
 );
 
 约束：保证数据库中的数据的完整性和一致性
     1.主键约束：primary key（这一列的数据不能重复，唯一）
     2.非空约束：not null（约束这一列的数据不能是 null 值）
     3.默认值约束：default 值（当这一列不插入数据的时候可以会有默认值）
     4.检查约束：check(检查条件)（可以限制某些数据不能进来）
     5.外键约束：references 主表(主键列)
         外键：
             1.有主表，子表
             2.主表中有主键，子表中的列引用主表中的主键列的数据
             3.子表中存在有外键列
         
         建立外键约束的语法
     
     表建立完成以后再加约束
         alter table score add constraint FK_sno foreign key(sno) references student(sno);
</code></pre>
</li>
<li><p>alter（修改）</p>
<ol>
<li><p>添加字段</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> stuInfo <span class="keyword">add</span>(msg varchar2(<span class="number">100</span>));</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改字段</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> stuInfo modify(msg varchar2(<span class="number">50</span>));</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除字段</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> stuInfo <span class="keyword">drop</span>(msg);</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看表结构</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">desc</span> stuInfo;	(需要在交互窗口调用)</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><p>drop（删除）</p>
</li>
</ol>
<h3 id="3-DML-语句"><a href="#3-DML-语句" class="headerlink" title="3. DML 语句"></a>3. DML 语句</h3><pre><code>DML：数据操作语句（增加，删除，修改，查询）
    增加语句：
        insert into 表名(列名1,列名2,列名3...) values(值1,值2,值3...);
        注意1：列名如果不写，意味着写了全部的列
        注意2：值（数字，字符串，日期时间），只有数字不用加 &#39;&#39; ，其他的类型都加上，日期时间可以使用 to_date() 函数，或者是 &#39;dd-mm-yy&#39; 格式的字符串
        例如：
            insert into student values(3,&#39;小红&#39;,&#39;女&#39;,18,&#39;平塘村&#39;,&#39;1-11月-2022&#39;);
            注意默认值的插入问题

    修改语句：
        update 表名 set 列名1=新的值,列名2=新的值,列名3=新的值... where 修改的条件;
    
    删除语句：
        delete from 表名 where 条件;
        truncate table emp;（截断表，会删除表的所有数据，还不能回滚）
</code></pre>
<h3 id="4-oracle-用户管理"><a href="#4-oracle-用户管理" class="headerlink" title="4. oracle 用户管理"></a>4. oracle 用户管理</h3><ol>
<li>oracle 的数据存储的逻辑结构<br> <img src="https://img-blog.csdnimg.cn/3f30b42449e1493c86c41710b63c907b.png" alt="在这里插入图片描述"></li>
<li>表空间的管理<ol>
<li><p>创建表空间</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space 表名</span><br><span class="line">datafile <span class="string">&#x27;e:\svse.dbf&#x27;</span>		<span class="comment">-- 指定表空间物理文件的存储位置</span></span><br><span class="line">size <span class="number">50</span>m</span><br><span class="line">autoextend <span class="keyword">on</span>;		<span class="comment">-- 自动扩展</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space qld datafile <span class="string">&#x27;d:\qld.dbf&#x27;</span> size <span class="number">10</span>m autoextend <span class="keyword">on</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>每当开发一系统的时候，我们都会创建一个用户，以及表空间</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> 用户名 identified <span class="keyword">by</span> &quot;密码&quot; <span class="keyword">default</span> tablespace 表空间名称;</span><br></pre></td></tr></table></figure></li>
<li><p>该用户没有登录 oracle 的权限 create session 的权限<br><img src="https://img-blog.csdnimg.cn/b36c59bba5f245bba662dc41cf47d596.png" alt="在这里插入图片描述"></p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grant</span> <span class="keyword">create</span> session <span class="keyword">to</span> qld;		<span class="comment">-- 授予 xx 权限给用户</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">grant</span> connet,resource <span class="keyword">to</span> qld;		<span class="comment">-- 授予连接和资源的权限</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">revoke</span> 权限 <span class="keyword">from</span> 用户;		<span class="comment">-- 移除某用户的某个权限</span></span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ol>
<h3 id="5-了解-oracle-的函数"><a href="#5-了解-oracle-的函数" class="headerlink" title="5. 了解 oracle 的函数"></a>5. 了解 oracle 的函数</h3><h4 id="1-case-when-函数"><a href="#1-case-when-函数" class="headerlink" title="1. case when 函数"></a>1. case when 函数</h4><pre><code>case when:判断

case when 条件表达式1 then 值1
         when 条件表达式1 then 值1
         ...
         else
         	其他值
end

case 条件表达式
    when 值1 then 处理1
    when 值1 then 处理1
    ...
    else
        其他处理
end

else 可以省略，when 判断时一个条件成立，将不在继续执行
</code></pre>
<ol>
<li><p>查询 score 表，将学生成绩分级，&lt;60 不及格，70&lt; and &gt;&#x3D;60 及格，&lt;80 and &gt;&#x3D;70 中等，&lt;90 and &gt;&#x3D;80 良好，&gt;&#x3D;90 优秀</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> score.<span class="operator">*</span>,</span><br><span class="line">	<span class="keyword">case</span></span><br><span class="line">		<span class="keyword">when</span> s_score<span class="operator">&gt;=</span><span class="number">90</span> <span class="keyword">then</span> <span class="string">&#x27;优秀&#x27;</span></span><br><span class="line">		<span class="keyword">when</span> s_score<span class="operator">&gt;=</span><span class="number">80</span> <span class="keyword">then</span> <span class="string">&#x27;良好&#x27;</span></span><br><span class="line">		<span class="keyword">when</span> s_score<span class="operator">&gt;=</span><span class="number">70</span> <span class="keyword">then</span> <span class="string">&#x27;中等&#x27;</span></span><br><span class="line">		<span class="keyword">when</span> s_score<span class="operator">&gt;=</span><span class="number">60</span> <span class="keyword">then</span> <span class="string">&#x27;及格&#x27;</span></span><br><span class="line">		<span class="keyword">else</span> <span class="string">&#x27;不及格&#x27;</span></span><br><span class="line">	<span class="keyword">end</span> <span class="keyword">as</span> scoreGrade</span><br><span class="line"><span class="keyword">from</span> score;</span><br></pre></td></tr></table></figure>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> score.<span class="operator">*</span>,</span><br><span class="line">	<span class="keyword">case</span> <span class="built_in">floor</span>(s_score<span class="operator">/</span><span class="number">10</span>)</span><br><span class="line">		<span class="keyword">when</span> <span class="number">10</span> <span class="keyword">then</span> <span class="string">&#x27;优秀&#x27;</span></span><br><span class="line">		<span class="keyword">when</span> <span class="number">9</span> <span class="keyword">then</span> <span class="string">&#x27;优秀&#x27;</span></span><br><span class="line">		<span class="keyword">when</span> <span class="number">8</span> <span class="keyword">then</span> <span class="string">&#x27;良好&#x27;</span></span><br><span class="line">		<span class="keyword">when</span> <span class="number">7</span> <span class="keyword">then</span> <span class="string">&#x27;中等&#x27;</span></span><br><span class="line">		<span class="keyword">when</span> <span class="number">6</span> <span class="keyword">then</span> <span class="string">&#x27;及格&#x27;</span></span><br><span class="line">		<span class="keyword">else</span> <span class="string">&#x27;不及格&#x27;</span></span><br><span class="line">	<span class="keyword">end</span> <span class="keyword">as</span> scoreGrade</span><br><span class="line"><span class="keyword">from</span> score;</span><br></pre></td></tr></table></figure>
</li>
<li><p>统计男女的年龄大于 20 在总人数的百分比</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> s_sex,<span class="built_in">sum</span>(cese</span><br><span class="line">					<span class="keyword">when</span> s_age<span class="operator">&gt;</span><span class="number">20</span> <span class="keyword">then</span> <span class="number">1</span></span><br><span class="line">					<span class="keyword">else</span> <span class="number">0</span></span><br><span class="line">				 <span class="keyword">end</span>)<span class="operator">/</span><span class="built_in">count</span>(s_no)</span><br><span class="line"><span class="keyword">from</span> student</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> s_sex;		</span><br></pre></td></tr></table></figure>
</li>
<li><p>行转列——查询学生分数按行显示</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> s_no,</span><br><span class="line">			<span class="built_in">max</span>(<span class="keyword">case</span> <span class="keyword">when</span> c_no<span class="operator">=</span><span class="string">&#x27;c001&#x27;</span> <span class="keyword">then</span> s_score <span class="keyword">else</span> <span class="keyword">null</span> <span class="keyword">end</span>) <span class="keyword">as</span> c001,</span><br><span class="line">			<span class="built_in">max</span>(<span class="keyword">case</span> <span class="keyword">when</span> c_no<span class="operator">=</span><span class="string">&#x27;c002&#x27;</span> <span class="keyword">then</span> s_score <span class="keyword">else</span> <span class="keyword">null</span> <span class="keyword">end</span>) <span class="keyword">as</span> c002,</span><br><span class="line">			<span class="built_in">max</span>(<span class="keyword">case</span> <span class="keyword">when</span> c_no<span class="operator">=</span><span class="string">&#x27;c003&#x27;</span> <span class="keyword">then</span> s_score <span class="keyword">else</span> <span class="keyword">null</span> <span class="keyword">end</span>) <span class="keyword">as</span> c003,</span><br><span class="line">			<span class="built_in">max</span>(<span class="keyword">case</span> <span class="keyword">when</span> c_no<span class="operator">=</span><span class="string">&#x27;c004&#x27;</span> <span class="keyword">then</span> s_score <span class="keyword">else</span> <span class="keyword">null</span> <span class="keyword">end</span>) <span class="keyword">as</span> c004</span><br><span class="line"><span class="keyword">from</span> score</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> s_no;</span><br></pre></td></tr></table></figure>
</li>
<li><p>行转列——pivot（ oracle 专有）</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> score pivot(<span class="built_in">sum</span>(s_score) <span class="keyword">for</span> c_no <span class="keyword">in</span> (<span class="string">&#x27;c001&#x27;</span> <span class="keyword">as</span> c001,<span class="string">&#x27;c002&#x27;</span> <span class="keyword">as</span> c002,<span class="string">&#x27;c003&#x27;</span> <span class="keyword">as</span> c003,<span class="string">&#x27;c004&#x27;</span> <span class="keyword">as</span> c004));</span><br></pre></td></tr></table></figure>
</li>
<li><p>列转行——union all</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> s_no,<span class="string">&#x27;c001&#x27;</span> <span class="keyword">as</span> c_no,c001 <span class="keyword">as</span> score <span class="keyword">from</span> sc1 <span class="keyword">where</span> c001 <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line"><span class="keyword">union</span> <span class="keyword">all</span></span><br><span class="line"><span class="keyword">select</span> s_no,<span class="string">&#x27;c002&#x27;</span> <span class="keyword">as</span> c_no,c002 <span class="keyword">as</span> score <span class="keyword">from</span> sc1 <span class="keyword">where</span> c002 <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line"><span class="keyword">union</span> <span class="keyword">all</span></span><br><span class="line"><span class="keyword">select</span> s_no,<span class="string">&#x27;c003&#x27;</span> <span class="keyword">as</span> c_no,c003 <span class="keyword">as</span> score <span class="keyword">from</span> sc1 <span class="keyword">where</span> c003 <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line"><span class="keyword">union</span> <span class="keyword">all</span></span><br><span class="line"><span class="keyword">select</span> s_no,<span class="string">&#x27;c004&#x27;</span> <span class="keyword">as</span> c_no,c004 <span class="keyword">as</span> score <span class="keyword">from</span> sc1 <span class="keyword">where</span> c004 <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">;</span><br></pre></td></tr></table></figure>
</li>
<li><p>列转行——unpivot（ oracle 专有）</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> sc1 unpivot(s_score <span class="keyword">for</span> c_no <span class="keyword">in</span>(c001,c002,c003,c004));</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="2-rownum-函数"><a href="#2-rownum-函数" class="headerlink" title="2. rownum 函数"></a>2. rownum 函数</h4><h2 id="四-oracle-数据库对象"><a href="#四-oracle-数据库对象" class="headerlink" title="四 oracle 数据库对象"></a>四 oracle 数据库对象</h2><h3 id="1-同义词"><a href="#1-同义词" class="headerlink" title="1.同义词"></a>1.同义词</h3><ol>
<li>同义词：就是一个数据库对象的别名，我们通过起别名的方式来访问对象</li>
<li>分类：<ul>
<li>私有：  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> synonym 同义词的名称 <span class="keyword">for</span> 数据库对象;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 超管授权</span></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">create</span> synonym <span class="keyword">to</span> 用户;</span><br></pre></td></tr></table></figure></li>
<li>公有  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> public synonym 同义词的名称 <span class="keyword">for</span> 数据库对象;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 超管授权</span></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">create</span> public synonym <span class="keyword">to</span> 用户;</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">drop</span> public synonym <span class="keyword">to</span> 用户;</span><br></pre></td></tr></table></figure></li>
<li>数据字典：user_synonyms（视图，存储有该用户下的所有的同义词）</li>
</ul>
</li>
<li>操作顺序（练习）<ol>
<li>建立一个用户，授予连接权限</li>
<li>登录 scott，将表的权限授予该用户（grant all on emp to 用户）</li>
<li>登录该用户，尝试访问这个表</li>
<li>建议一个私有、公有同义词（注意授权）</li>
<li>分别访问一次</li>
<li>删除以上两个同义词</li>
</ol>
</li>
<li>在数据字典 dba_synonyms 中记录了数据库中所有的同义词，包括每个用户创建的私有同义词和 dba 创建的公共同义词。这个视图只有 dba 能够访问，它的结构除了包含数据字典 user_synonyms 的所有列外，还有一个列 owner 代表同义词的创建者。 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> synonym_name,table_name,table_owner <span class="keyword">from</span> dba_synonyms <span class="keyword">where</span> owner<span class="operator">=</span><span class="string">&#x27;PUBLIC&#x27;</span>;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="2-序列"><a href="#2-序列" class="headerlink" title="2.序列"></a>2.序列</h3><ol>
<li><p>作用：用于生成唯一的 id 号</p>
</li>
<li><p>数据库中有些列是需要自动的递增，不同的数据库有不同的处理方式</p>
<ul>
<li><p>mysql：自动增长列 auto_increment(1,1)</p>
</li>
<li><p>sqlserver：自动增长列 ide…</p>
</li>
<li><p>oracle：<br><img src="https://img-blog.csdnimg.cn/dba08dd2a47c42fe90a95bec4bd25f39.png" alt="在这里插入图片描述"></p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> sequence 序列名</span><br><span class="line"><span class="keyword">start</span> <span class="keyword">with</span> <span class="number">1</span>	<span class="comment">-- 初始值</span></span><br><span class="line">increment <span class="keyword">by</span> <span class="number">1</span>	<span class="comment">-- 递增值</span></span><br><span class="line">maxvalue		<span class="comment">-- 最大值</span></span><br><span class="line">minvalue		<span class="comment">-- 最小值</span></span><br><span class="line">nocycle		<span class="comment">-- 是否循环</span></span><br><span class="line">cache <span class="number">4</span>		<span class="comment">-- 缓存</span></span><br></pre></td></tr></table></figure>

<ul>
<li>访问序列：<ul>
<li>当前值：currval</li>
<li>下一个值：nextval</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>创建序列</p>
<ul>
<li><p>创建序列需要 create sequence 系统权限，序列的创建语法如下：</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> sequence 序列名</span><br><span class="line">[ increment <span class="keyword">by</span> n ]</span><br><span class="line">[ <span class="keyword">start</span> <span class="keyword">with</span> n ]</span><br><span class="line">[ &#123; maxvalue<span class="operator">/</span>minvalue n <span class="operator">|</span> nomaxvalue &#125; ]</span><br><span class="line">[ &#123; <span class="keyword">cycle</span> <span class="operator">|</span> nocycle &#125; ]</span><br><span class="line">[ &#123; cache n <span class="operator">|</span> nocache &#125; ]</span><br></pre></td></tr></table></figure>
<p> 其中：</p>
<p>  (1)：increment by 用于定义序列的步长，如果省略，则默认为1，如果出现负值，则代表 oracle 序列的值是按照此步长增减的<br>  (2)：start with 定义序列的初始值（即产生的第一个值），默认为1<br>  (3)：maxvalue 定义序列生成器能产生的最大值，选项 nomaxvalue 是默认选项，代表没有最大值定义，这时对于递增 oracle 序列，系统能够产生的最大值是10的27次方；对于递减序列，最大值是-1<br>  (4)：minvalue 定义序列生成器能产生的最小值，选项 nomaxvalue 是默认选项，代表没有最小值定义，这时对于递减序列，系统能够产生的最小值是？10的26次方；对于递增序列，最小值是1<br>  (5)：cycle 和 nocycle 表示当序列生成器的值达到限制值后是否循环，cycle 代表循环，nocycle 代表不循环。如果循环，则当递增序列达到最大值时，循环到最小值；对于递减序列达到最小值时，循环到最大值。如果不循环，达到限制值后，继续产生新值就会发生错误<br>  (6)：cache（缓冲）定义存放序列的内存块的大小，默认为20。nocache 表示不对序列进行内存缓冲。对序列进行内存缓冲，可以改善序列的性能<br>   大量语句发生请求时，申请序列时，为了避免序列在运用层实现序列而引起的性能瓶颈。oracle序列允许将序列提前生成 cache x个先存入内存，在发生大量申请序列语句时，可直接到运行最快的内存中去得到序列。但 cache 个数也不能设置太大，因为在数据库重启时，会清空内存信息，预存在内存中的序列会丢失，当数据库再次启动后，序列从上次内存中最大的序列号 +1 开始存入 cache x个。这种情况也能会在数据库关闭时也会导致序号不连续。<br>  (7)：nextval 返回序列中下一个有效的值，任何用户都可以引用<br>  (8)：currval 中存放序列的当前值，nextval 应在 currval 之前指定，二者应同时有效</p>
</li>
</ul>
</li>
<li><p>序列缓存问题<br> <img src="https://img-blog.csdnimg.cn/01224ab43437494ea3159da714abbc82.png" alt="在这里插入图片描述"><br>     缓存中的数据个数要小于循环的最大个数，意思就是没必要产生那么多的缓存数据。默认为20</p>
</li>
</ol>
<h3 id="3-视图"><a href="#3-视图" class="headerlink" title="3.视图"></a>3.视图</h3><ol>
<li>视图：一个虚拟的表，在原表（基表）上的一次查询，并且做了存储</li>
<li>创建语法： <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> ( <span class="keyword">or</span> replace ) <span class="keyword">view</span> 视图名</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">	查询语句</span><br></pre></td></tr></table></figure></li>
<li>视图使用注意<ul>
<li>可以在简单视图中使用 DML 操作</li>
<li>视图中定义<br>  group by &#x2F; 分组函数 &#x2F; rownum 之类的语句的时候，DML 不允许</li>
</ul>
</li>
</ol>
<p>		  </p>
<h3 id="4-索引（难点）"><a href="#4-索引（难点）" class="headerlink" title="4.索引（难点）"></a>4.索引（难点）</h3><ol>
<li>解释：索引就是类似于书籍的目录，字典中的。数据库表中的数据如果量比较大时，需要将这些数据做一个目录出来</li>
<li>索引建立的目的在于：快速的查找</li>
<li>索引的分类<ul>
<li>聚集索引：索引的顺序与数据的存储顺序是一致的，一个表只有一个</li>
<li>非聚集索引</li>
</ul>
</li>
<li>建立一个索引 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> index idx_sname <span class="keyword">on</span> student(sname);</span><br></pre></td></tr></table></figure></li>
<li>删除一个索引 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> index 索引名;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="五-PL-SQL-编程与存储过程"><a href="#五-PL-SQL-编程与存储过程" class="headerlink" title="五 PL-SQL 编程与存储过程"></a>五 PL-SQL 编程与存储过程</h2><ol>
<li><p>PL-SQL 编程</p>
<ul>
<li>sql 语言的扩展：<br> <img src="https://img-blog.csdnimg.cn/871638cbbe004cf0a0216f1c95d96e8f.png" alt="在这里插入图片描述"></li>
<li>PL-SQL 组成：PL&#x2F;SQL 分为三个部分，声明部分（定义变量）、可执行部分（核心代码）和异常处理部分（处理异常）<br><img src="https://img-blog.csdnimg.cn/bb429d07f18946279f61be642c19e9b7.png" alt="在这里插入图片描述"></li>
</ul>
</li>
<li><p>if 语句</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 统计出 emp 的平均工资，如果 &gt;2000，显示公司有钱，&lt;2000，公司很穷</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">	avgSal emp.sal<span class="operator">%</span>type;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">	<span class="keyword">select</span> <span class="built_in">avg</span>(sal) <span class="keyword">into</span> avgSal <span class="keyword">from</span> emp;</span><br><span class="line">	dbms_output.put_line(avgSal);</span><br><span class="line">	</span><br><span class="line">	if avgSal <span class="operator">&lt;=</span><span class="number">2000</span> <span class="keyword">then</span></span><br><span class="line">		dbms_output.put_line(<span class="string">&#x27;穷公司&#x27;</span>);</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		dbms_output.put_line(<span class="string">&#x27;公司有钱&#x27;</span>);</span><br><span class="line">	<span class="keyword">end</span> if;</span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>多重 if 语句</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询出 7839 这个员工的工资，</span></span><br><span class="line"><span class="comment">-- &lt;=2000：穷鬼</span></span><br><span class="line"><span class="comment">-- &lt;=3000：一般般</span></span><br><span class="line"><span class="comment">-- &lt;=4000：还可以</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">	mySal emp.sal<span class="operator">%</span>type;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">	<span class="keyword">select</span> sal <span class="keyword">into</span> mySal <span class="keyword">from</span> emp <span class="keyword">where</span> empno<span class="operator">=</span><span class="number">7839</span>;</span><br><span class="line">	</span><br><span class="line">	if mySal <span class="operator">&lt;=</span><span class="number">2000</span> <span class="keyword">then</span></span><br><span class="line">		dbms_output.put_line(<span class="string">&#x27;穷鬼&#x27;</span>);</span><br><span class="line">	elsif mySal <span class="operator">&lt;=</span><span class="number">3000</span> <span class="keyword">then</span></span><br><span class="line">		dbms_output.put_line(<span class="string">&#x27;一般般&#x27;</span>);</span><br><span class="line">	elsif mySal <span class="operator">&lt;=</span><span class="number">4000</span> <span class="keyword">then</span></span><br><span class="line">		dbms_output.put_line(<span class="string">&#x27;还可以&#x27;</span>);</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		dbms_output.put_line(<span class="string">&#x27;土豪&#x27;</span>);</span><br><span class="line">	<span class="keyword">end</span> if;</span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>loop 循环</p>
<pre><code> loop 循环语法：
 
 loop
     exit when 条件表达式;
     执行语句;
 end loop;
</code></pre>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 计算 1-10 相加的总和</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">	i <span class="type">int</span>:<span class="operator">=</span><span class="number">1</span>;</span><br><span class="line">	sum1 <span class="type">int</span>:<span class="operator">=</span><span class="number">0</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">	</span><br><span class="line">	loop</span><br><span class="line">		exit <span class="keyword">when</span> i<span class="operator">&gt;</span><span class="number">10</span>;</span><br><span class="line">		sum1:<span class="operator">=</span>sum1<span class="operator">+</span>i;</span><br><span class="line">		i:<span class="operator">=</span>i<span class="operator">+</span><span class="number">1</span>;</span><br><span class="line">	<span class="keyword">end</span> loop;</span><br><span class="line">	</span><br><span class="line">	dbms_output.put_line(sum1);</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>while 循环</p>
<pre><code> while 循环语法：
 
 while 循环条件
 loop
     执行语句;
 end loop;
</code></pre>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 计算 1-10 相加的总和</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">	i <span class="type">int</span>:<span class="operator">=</span><span class="number">1</span>;</span><br><span class="line">	s <span class="type">int</span>:<span class="operator">=</span><span class="number">0</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">	</span><br><span class="line">	while i<span class="operator">&lt;=</span><span class="number">10</span></span><br><span class="line">	loop</span><br><span class="line">		s:<span class="operator">=</span>s<span class="operator">+</span>i;</span><br><span class="line">		i:<span class="operator">=</span>i<span class="operator">+</span><span class="number">1</span>;</span><br><span class="line">	<span class="keyword">end</span> loop;</span><br><span class="line">	</span><br><span class="line">	dbms_output.put_line(s);</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>for 循环</p>
<pre><code> for 循环语法：
 
 for 变量 in 起始值..结束值
 loop
     执行语句;
 end loop;
</code></pre>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 计算 1-10 相加的总和</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">	i <span class="type">int</span>:<span class="operator">=</span><span class="number">1</span>;</span><br><span class="line">	s <span class="type">int</span>:<span class="operator">=</span><span class="number">0</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1.</span><span class="number">.10</span></span><br><span class="line">	loop</span><br><span class="line">		s:<span class="operator">=</span>s<span class="operator">+</span>i;</span><br><span class="line">	<span class="keyword">end</span> loop;</span><br><span class="line">	</span><br><span class="line">	dbms_output.put_line(s);</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>异常处理</p>
</li>
<li><p>存储过程<br> 将一些 sql 的代码存储下来，并且命了一个名字：存储过程需要调用</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">procedure</span> pro_savemoney(money <span class="type">int</span>)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">	hasMoney <span class="type">int</span>;</span><br><span class="line">	no_money_error exception;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">	<span class="comment">-- 取款业务</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">select</span> bmoney <span class="keyword">into</span> hasMoney <span class="keyword">from</span> bank <span class="keyword">where</span> bid<span class="operator">=</span><span class="number">1</span>;</span><br><span class="line">	</span><br><span class="line">	if money <span class="operator">&gt;</span> hasMoney <span class="keyword">then</span></span><br><span class="line">		raise no_money_error;</span><br><span class="line">	<span class="keyword">end</span> if;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">-- 增加交易记录</span></span><br><span class="line">	<span class="keyword">insert</span> <span class="keyword">into</span> tradeinfo <span class="keyword">values</span>(<span class="number">6</span>,<span class="number">1</span>,<span class="string">&#x27;取款&#x27;</span>,money,<span class="keyword">default</span>);</span><br><span class="line">	</span><br><span class="line">	<span class="comment">-- 修改账户信息</span></span><br><span class="line">	<span class="keyword">update</span> bank <span class="keyword">set</span> bmoney<span class="operator">=</span>bmoney<span class="operator">-</span>money <span class="keyword">where</span> bid<span class="operator">=</span><span class="number">1</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">-- 提交</span></span><br><span class="line">	<span class="keyword">commit</span>;</span><br><span class="line">		</span><br><span class="line">	exception</span><br><span class="line">		<span class="keyword">when</span> no_money_error <span class="keyword">then</span></span><br><span class="line">			dbms_output.put_line(<span class="string">&#x27;余额不足11&#x27;</span>);</span><br><span class="line">			<span class="comment">-- 回滚</span></span><br><span class="line">			<span class="keyword">rollback</span>;</span><br><span class="line">		<span class="keyword">when</span> others <span class="keyword">then</span></span><br><span class="line">			dbms_output.put_line(<span class="string">&#x27;余额不足22&#x27;</span> <span class="operator">||</span> SQLERRM);</span><br><span class="line">			<span class="keyword">rollback</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure></li>
</ol>

            </div>

            <!-- Post Comments -->
            
    <!-- 使用 DISQUS_CLICK -->
<div id="disqus-comment">
    <div id="disqus_thread"></div>

<!-- add animation -->
<style>
	.disqus_click_btn {
            line-height: 30px;
            margin: 0;
            min-width: 50px;
            padding: 0 14px;
            display: inline-block;
            font-family: "Roboto", "Helvetica", "Arial", sans-serif;
            font-size: 14px;
            font-weight: 400;
            text-transform: uppercase;
            letter-spacing: 0;
            overflow: hidden;
            will-change: box-shadow;
            transition: box-shadow .2s cubic-bezier(.4, 0, 1, 1), background-color .2s cubic-bezier(.4, 0, .2, 1), color .2s cubic-bezier(.4, 0, .2, 1);
            outline: 0;
            cursor: pointer;
            text-decoration: none;
            text-align: center;
            vertical-align: middle;
            border: 0;
            background: rgba(158, 158, 158, .2);
            box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .14), 0 3px 1px -2px rgba(0, 0, 0, .2), 0 1px 5px 0 rgba(0, 0, 0, .12);
            color: #fff;
            background-color: #7EC0EE;
            text-shadow: 0
        }
</style>
	
<div class="btn_click_load" id="disqus_bt"> 
    <button class="disqus_click_btn">点击查看评论</button>
</div>

<!--
<script type="text/javascript">
$('.btn_click_load').click(function() {
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'http-miccall-tech'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    document.getElementById('disqus_bt').style.display = "none";
});
</script>
-->
<script type="text/javascript">
    var disqus_config = function () {
        this.page.url = 'http://example.com/2022/11/30/oracle/';  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = 'http://example.com/2022/11/30/oracle/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
</script>

<script type="text/javascript">
    $('.btn_click_load').click(function() {  //click to load comments
        (function() { // DON'T EDIT BELOW THIS LINE
            var d = document;
            var s = d.createElement('script');
            s.src = '//http-miccall-tech.disqus.com/embed.js';
            s.setAttribute('data-timestamp', + new Date());
            (d.head || d.body).appendChild(s);
        })();
        $('.btn_click_load').css('display','none');
    });
</script>
</div>
<style>
    #disqus-comment{
        background-color: #eee;
        padding: 2pc;
    }
</style>


        </div>
        <!-- Copyright 版权 start -->
                <div id="copyright">
            <ul>
                <li>&copy;Powered By <a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/" style="border-bottom: none;">hexo</a></li>
                <li>Design: <a target="_blank" rel="noopener" href="http://miccall.tech " style="border-bottom: none;">miccall</a></li>
            </ul>
            
                <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
			
        </div>
    </div>
</body>



 	
</html>
