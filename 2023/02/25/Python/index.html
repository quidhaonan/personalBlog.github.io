<!DOCTYPE HTML>
<html>

<head>
	<link rel="bookmark"  type="image/x-icon"  href="/img/logo_miccall.png"/>
	<link rel="shortcut icon" href="/img/logo_miccall.png">
	
			    <title>
    Liu Mingyang's personal blog
    </title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="/css/mic_main.css" />
    <link rel="stylesheet" href="/css/dropdownMenu.css" />
    <meta name="keywords" content="miccall" />
    
    	<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
	 
    <noscript>
        <link rel="stylesheet" href="/css/noscript.css" />
    </noscript>
    <style type="text/css">
        body:before {
          content: ' ';
          position: fixed;
          top: 0;
          background: url('/img/bg.jpg') center 0 no-repeat;
          right: 0;
          bottom: 0;
          left: 0;
          background-size: cover; 
        }
    </style>

			    
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script async type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


    <script src="/js/jquery.min.js"></script>
    <script src="/js/jquery.scrollex.min.js"></script>
    <script src="/js/jquery.scrolly.min.js"></script>
    <script src="/js/skel.min.js"></script>
    <script src="/js/util.js"></script>
    <script src="/js/main.js"></script>
	
<meta name="generator" content="Hexo 6.3.0"></head>
    
		
<!-- Layouts -->



<!--  代码渲染  -->
<link rel="stylesheet" href="/css/prism_coy.css" />
<link rel="stylesheet" href="/css/typo.css" />
<!-- 文章页 -->
<body class="is-loading">
    <!-- Wrapper 外包 s-->
    <div id="wrapper" class="fade-in">
        <!-- Intro 头部显示 s -->
        <!-- Intro 头部显示 e -->
        <!-- Header 头部logo start -->
        <header id="header">
    <a href="/" class="logo">MICCALL</a>
</header>
        <!-- Nav 导航条 start -->
        <nav id="nav" class="special" >
            <ul class="menu links" >
			<!-- Homepage  主页  --> 
			<li >
	            <a href="/" rel="nofollow">主页</a>
	        </li>
			<!-- categories_name  分类   --> 
	        
	        <li class="active">
	            <a href="#s1">分类</a>
	                    <ul class="submenu">
	                        <li>
	                        
	                    </ul>
	        </li>
	        
	        <!-- archives  归档   --> 
	        
	        
		        <!-- Pages 自定义   -->
		        
		        <li>
		            <a href="/about/" title="简历">
		                简历
		            </a>
		        </li>
		        
		        <li>
		            <a href="/group/" title="团队">
		                团队
		            </a>
		        </li>
		        
		        <li>
		            <a href="/gallery/" title="图库">
		                图库
		            </a>
		        </li>
		        
		        <li>
		            <a href="/tag/" title="标签">
		                标签
		            </a>
		        </li>
		        


            </ul>
            <!-- icons 图标   -->
			<ul class="icons">
                    
                    <li>
                        <a title="github" href="https://github.com/miccall" target="_blank" rel="noopener">
                            <i class="icon fa fa-github"></i>
                        </a>
                    </li>
                    
                    <li>
                        <a title="500px" href="http://500px.com" target="_blank" rel="noopener">
                            <i class="icon fa fa-500px"></i>
                        </a>
                    </li>
                    
			</ul>
</nav>

        <div id="main" >
            <div class ="post_page_title_img" style="height: 25rem;background-image: url();background-position: center; background-repeat:no-repeat; background-size:cover;-moz-background-size:cover;overflow:hidden;" >
                <a href="#" style="padding: 4rem 4rem 2rem 4rem ;"><h2 >Python</h2></a>
            </div>
            <!-- Post -->
            <div class="typo" style="padding: 3rem;">
                <h1 id="Python"><a href="#Python" class="headerlink" title="Python"></a><center>Python</center></h1><p>@[TOC]</p>
<table>
<thead>
<tr>
<th>资料</th>
</tr>
</thead>
<tbody><tr>
<td>视频：<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Db4y1m7Ho/?spm_id_from=333.337.search-card.all.click">尚硅谷Python爬虫教程小白零基础速通（含python基础+爬虫案例）</a></td>
</tr>
<tr>
<td>视频笔记：<a target="_blank" rel="noopener" href="https://www.aliyundrive.com/s/c9s6tSU4QoF">笔记.exe</a></td>
</tr>
<tr>
<td>视频代码：<a target="_blank" rel="noopener" href="https://www.aliyundrive.com/s/KwJaiBWjf4U">代码.exe</a></td>
</tr>
<tr>
<td>视频资源：<a target="_blank" rel="noopener" href="https://www.aliyundrive.com/s/CoAvkEpLavA">资源.exe</a></td>
</tr>
</tbody></table>
<h2 id="一-Python-基础"><a href="#一-Python-基础" class="headerlink" title="一 Python 基础"></a>一 Python 基础</h2><h3 id="1-Python-环境的安装"><a href="#1-Python-环境的安装" class="headerlink" title="1.Python 环境的安装"></a>1.Python 环境的安装</h3><ol>
<li>下载 Python<ul>
<li><a target="_blank" rel="noopener" href="https://www.python.org/">Python</a></li>
</ul>
</li>
<li>安装 Python</li>
<li>测试是否安装成功<ul>
<li>点击电脑左下角开始按钮，输入 cmd 进入到 windows 的命令行模式</li>
<li>在命令行中输入 Python,正确显示 Python 版本，即表示 Python 安装成功</li>
</ul>
</li>
<li>手动配置 Python 环境变量<ul>
<li>如果在安装过程中，已经勾选了 Add Python 3.7 to PATH 选项，并且在 cmd 命令模式下输入 python 指令不报错，就不需要再手动的配置 Python</li>
<li>此处设置的是使用 python.exe 的环境变量</li>
</ul>
</li>
</ol>
<h3 id="2-pip-的使用"><a href="#2-pip-的使用" class="headerlink" title="2.pip 的使用"></a>2.pip 的使用</h3><ol>
<li>pip<ul>
<li>是一个现代的，通用的 Python 包管理工具。提供了对 Python 包的查找、下载、安装、卸载的功能，便于我们对 Python 的资源包进行管理</li>
</ul>
</li>
<li>安装<ul>
<li>在安装 Python 时，会自动下载并且安装 pip</li>
</ul>
</li>
<li>配置<ul>
<li>在 windows 命令行里，输入 pip -V 可以查看 pip 的版本</li>
<li>如果在命令行里，运行 pip -V ,出现如下提示：’pip’不是内部或外部命令，也不是可运行的程序或批处理文件。可能是因为在安装python的过程中未勾选 Add Python 3.7 to PATH 选项，需要手动的配置 pip 的环境变量（在 Scripts 的文件夹下）</li>
</ul>
</li>
<li>使用 pip 管理 Python 包<ul>
<li>pip install &lt;包名&gt;：安装指定的包</li>
<li>pip uninstall &lt;包名&gt;：删除指定的包</li>
<li>pip list：显示已经安装的包</li>
<li>pip freeze：显示已经安装的包，并且以指定的格式显示</li>
</ul>
</li>
<li>修改 pip 下载源<ul>
<li>运行 pip install 命令会从网站上下载指定的 python 包，默认是从<a target="_blank" rel="noopener" href="https://files.pythonhosted.org/">https://files.pythonhosted.org/</a> 网站上下载。这是个国外的网站，遇到网络情况不好的时候，可能会下载失败，我们可以通过命令，修改pip现在软件时的源</li>
<li>格式：pip install 包名 -i 国内源地址</li>
<li>示例：pip install ipython -i <a target="_blank" rel="noopener" href="https://pypi.mirrors.ustc.edu.cn/simple/">https://pypi.mirrors.ustc.edu.cn/simple/</a> ，就是从中国科技大学(ustc)的服务器上下载 requests(基于 python 的第三方 web 框架)</li>
<li>国内常用的pip下载源列表：<ul>
<li>阿里云：<a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/pypi/simple/">http://mirrors.aliyun.com/pypi/simple/</a></li>
<li>中国科技大学：<a target="_blank" rel="noopener" href="https://pypi.mirrors.ustc.edu.cn/simple/">https://pypi.mirrors.ustc.edu.cn/simple/</a></li>
<li>豆瓣(douban)：<a target="_blank" rel="noopener" href="http://pypi.douban.com/simple/">http://pypi.douban.com/simple/</a></li>
<li>清华大学：<a target="_blank" rel="noopener" href="https://pypi.tuna.tsinghua.edu.cn/simple/">https://pypi.tuna.tsinghua.edu.cn/simple/</a></li>
<li>中国科学技术大学：<a target="_blank" rel="noopener" href="http://pypi.mirrors.ustc.edu.cn/simple/">http://pypi.mirrors.ustc.edu.cn/simple/</a></li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="3-运行-Python-程序"><a href="#3-运行-Python-程序" class="headerlink" title="3.运行 Python 程序"></a>3.运行 Python 程序</h3><ol>
<li>终端运行<ul>
<li>直接在python解释器中书写代码</li>
<li>退出python环境<ul>
<li>exit()</li>
<li>ctrl + z &#x3D;&#x3D;&gt; enter</li>
</ul>
</li>
<li>使用 ipython 解释器编写代码</li>
<li>使用pip命令，可以快速的安装 IPython：pip install ipython</li>
</ul>
</li>
<li>. 运行 python 文件<ul>
<li>使用python指令运行后缀为.py的python文件</li>
</ul>
</li>
<li>Pycharm<ul>
<li>IDE 的概念<ul>
<li>IDE(Integrated Development Environment)又被称为集成开发环境。说白了，就是有一款图形化界面的软件，它集成了编辑代码，编译代码，分析代码，执行代码以及调试代码等功能。在我们Python开发中，最常用的IDE是Pycharm</li>
</ul>
</li>
<li>pycharm由捷克公司JetBrains开发的一款IDE,提供代码分析、图形化调试器，集成测试器、集成版本控制系统等，主要用来编写Python代码</li>
<li><a target="_blank" rel="noopener" href="http://www.jetbrains.com/pycharm/download">下载地址</a></li>
</ul>
</li>
</ol>
<h3 id="4-Python"><a href="#4-Python" class="headerlink" title="4.Python"></a>4.Python</h3><ol>
<li><p>注释</p>
<ol>
<li>注释介绍<ul>
<li>在我们工作编码的过程中，如果一段代码的逻辑比较复杂，不是特别容易理解，可以适当的添加注释，以辅助自己或者其他编码人员解读代码</li>
<li>注意：注释是给程序员看的，为了让程序员方便阅读代码，解释器会忽略注释。使用自己熟悉的语言，适当的对代码进行注释说明是一种良好的编码习惯</li>
</ul>
</li>
<li>注释的分类<ul>
<li>单行注释：以 # 开头，# 右边的所有东西当做说明，而不是真正要执行的程序，起辅助说明作用</li>
<li>多行注释：以 ‘’’ 开始，并以 ‘’’ 结束，我们称之为多行注释</li>
</ul>
</li>
</ol>
</li>
<li><p>变量以及数据类型</p>
<ol>
<li><p>变量的定义</p>
<ul>
<li>对于重复使用，并且经常需要修改的数据，可以定义为变量，来提高编程效率</li>
<li>定义变量的语法为: 变量名 &#x3D; 变量值 。(这里的 &#x3D; 作用是赋值)</li>
<li>定义变量后可以使用变量名来访问变量值</li>
<li>说明：①变量即是可以变化的量，可以随时进行修改	②程序就是用来处理数据的，而变量就是用来存储数据的 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">a=<span class="number">1</span></span><br><span class="line">b=<span class="number">1.1</span></span><br><span class="line">c=<span class="literal">True</span></span><br><span class="line">d=<span class="literal">False</span></span><br><span class="line">e=<span class="string">&#x27;例子&#x27;</span></span><br><span class="line">f=<span class="string">&quot;例子&quot;</span></span><br><span class="line">g=[<span class="string">&#x27;列表&#x27;</span>]	<span class="comment"># 也可以双引号</span></span><br><span class="line">h=(<span class="string">&#x27;元组&#x27;</span>)	<span class="comment">#也可以双引号</span></span><br><span class="line">i=&#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;字典&#x27;</span>&#125;	<span class="comment">#也可以双引号</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>变量的类型<br> <img src="https://img-blog.csdnimg.cn/a98ff5edf2ff443dbff13a34ad4edb78.png" alt="在这里插入图片描述"></p>
</li>
<li><p>查看数据类型</p>
<ul>
<li>在python中，只要定义了一个变量，而且它有数据，那么它的类型就已经确定了，不需要咱们开发者主动的去说明它的类型，系统会自动辨别。也就是说在使用的时候 “变量没有类型，数据才有类型”</li>
<li>如果临时想要查看一个变量存储的数据类型，可以使用 type(变量的名字)，来查看变量存储的数据类型  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">type</span>(a)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
</li>
<li><p>标识符和关键字</p>
<ol>
<li>计算机编程语言中，标识符是用户编程时使用的名字，用于给变量、常量、函数、语句块等命名，以建立起名称与使用之间的关系<ul>
<li>标识符由字母、下划线和数字组成，且数字不能开头</li>
<li>严格区分大小写</li>
<li>不能使用关键字</li>
</ul>
</li>
<li>命名规范<ul>
<li>标识符命名要做到顾名思义</li>
<li>遵守一定的命名规范：驼峰命名法（大驼峰命名法和小驼峰命名法）</li>
<li>大驼峰式命名法（upper camel case）： 每一个单字的首字母都采用大写字母，例如：<br>FirstName、LastName</li>
<li>小驼峰式命名法（lower camel case）： 第一个单词以小写字母开始；第二个单词的首字母大写，例如：myName、aDog</li>
<li>还有一种命名法是用下划线“_”来连接所有的单词，比如 send_buf.Python 的命令规则遵循 PEP8 标准</li>
</ul>
</li>
<li>关键字<ul>
<li>一些具有特殊功能的标识符，这就是所谓的关键字</li>
<li>关键字，已经被 Python 官方使用了，所以不允许开发者自己定义和关键字相同名字的标识符</li>
</ul>
</li>
</ol>
</li>
<li><p>类型转换</p>
<table>
<thead>
<tr>
<th>函数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>int(x)</td>
<td>将 x 转换为一个整数</td>
</tr>
<tr>
<td>float(x)</td>
<td>将 x 转换为一个浮点数</td>
</tr>
<tr>
<td>str(x)</td>
<td>将对象 x 转换为字符串</td>
</tr>
<tr>
<td>bool(x)</td>
<td>将对象 x 转换成为布尔值</td>
</tr>
</tbody></table>
<ol>
<li>转换成为整数 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">int</span>(<span class="string">&quot;123&quot;</span>)) <span class="comment"># 123 将字符串转换成为整数</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">int</span>(<span class="number">123.78</span>)) <span class="comment"># 123 将浮点数转换成为整数</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">int</span>(<span class="literal">True</span>)) <span class="comment"># 1 布尔值True转换成为整数是 1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">int</span>(<span class="literal">False</span>)) <span class="comment"># 0 布尔值False转换成为整数是 0</span></span><br><span class="line"><span class="comment"># 以下两种情况将会转换失败</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">123.456 和 12ab 字符串，都包含非法字符，不能被转换成为整数，会报错</span></span><br><span class="line"><span class="string">print(int(&quot;123.456&quot;))</span></span><br><span class="line"><span class="string">print(int(&quot;12ab&quot;))</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure></li>
<li>转换成为浮点数 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">f1 = <span class="built_in">float</span>(<span class="string">&quot;12.34&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(f1) <span class="comment"># 12.34</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(f1)) <span class="comment"># float 将字符串的 &quot;12.34&quot; 转换成为浮点数 12.34</span></span><br><span class="line">f2 = <span class="built_in">float</span>(<span class="number">23</span>)</span><br><span class="line"><span class="built_in">print</span>(f2) <span class="comment"># 23.0</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(f2)) <span class="comment"># float 将整数转换成为了浮点数</span></span><br></pre></td></tr></table></figure></li>
<li>转换成为字符串 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">str1 = <span class="built_in">str</span>(<span class="number">45</span>)</span><br><span class="line">str2 = <span class="built_in">str</span>(<span class="number">34.56</span>)</span><br><span class="line">str3 = <span class="built_in">str</span>(<span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(str1),<span class="built_in">type</span>(str2),<span class="built_in">type</span>(str3))</span><br></pre></td></tr></table></figure></li>
<li>转换成为布尔值 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">	除了以下的将强转为 False ，其他的都将会转为 True</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">bool</span>(<span class="string">&#x27;&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">bool</span>(<span class="string">&quot;&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">bool</span>(<span class="number">0</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">bool</span>(&#123;&#125;))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">bool</span>([])）</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">bool</span>(())）</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><p>运算符</p>
<ol>
<li>算数运算符<br> 下面以a&#x3D;10 ,b&#x3D;20为例进行计算<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody><tr>
<td>+</td>
<td>加</td>
<td>两个对象相加 a + b 输出结果 30</td>
</tr>
<tr>
<td>-</td>
<td>减</td>
<td>得到负数或是一个数减去另一个数 a - b 输出结果 -10</td>
</tr>
<tr>
<td>*</td>
<td>乘</td>
<td>两个数相乘或是返回一个被重复若干次的字符串 a * b 输出结果 200</td>
</tr>
<tr>
<td>&#x2F;</td>
<td>除</td>
<td>b &#x2F; a 输出结果 2</td>
</tr>
<tr>
<td>&#x2F;&#x2F;</td>
<td>取整数</td>
<td>返回商的整数部分 9&#x2F;&#x2F;2 输出结果 4 , 9.0&#x2F;&#x2F;2.0 输出结果 4.0</td>
</tr>
<tr>
<td>%</td>
<td>取余</td>
<td>返回除法的余数 b % a 输出结果 0</td>
</tr>
<tr>
<td>**</td>
<td>指数</td>
<td>a**b 为10的20次方</td>
</tr>
<tr>
<td>()</td>
<td>小括号</td>
<td>提高运算优先级，比如: (1+2) * 3</td>
</tr>
</tbody></table>
<blockquote>
<p>注意：混合运算时，优先级顺序为： ** 高于 * &#x2F; % &#x2F;&#x2F; 高于 + - ，为了避免歧义，建议使用 () 来处理运算符优先级。 并且，不同类型的数字在进行混合运算时，整数将会转换成浮点数进行运算</p>
</blockquote>
<p> 算数运算符在字符串里的使用：</p>
<ul>
<li>如果是两个字符串做加法运算，会直接把这两个字符串拼接成一个字符串  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">str1 =<span class="string">&#x27;hello&#x27;</span></span><br><span class="line">str2 = <span class="string">&#x27;world&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(str1+str2)	<span class="comment"># &#x27;helloworld&#x27;</span></span><br></pre></td></tr></table></figure></li>
<li>如果是数字和字符串做加法运算，会直接报错  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">str1 = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">a = <span class="number">2</span></span><br><span class="line"><span class="built_in">print</span>(str1+a)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">	Traceback (most recent call last):</span></span><br><span class="line"><span class="string">			File &quot;D:\我的下载2   代码和电路有关的\python\pyCharm\code\01.HelloWord\com\xc\HelloWord.py&quot;, line 3, in &lt;module&gt;</span></span><br><span class="line"><span class="string"> 			print(str1+a)</span></span><br><span class="line"><span class="string">       			  ~~~~^~</span></span><br><span class="line"><span class="string">	TypeError: can only concatenate str (not &quot;int&quot;) to str</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure></li>
<li>如果是数字和字符串做乘法运算，会将这个字符串重复多次  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">str1 = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(str1*<span class="number">10</span>)	<span class="comment"># hellohellohellohellohellohellohellohellohellohello</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>赋值运算符<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody><tr>
<td>&#x3D;</td>
<td>赋值运算符</td>
<td>把 &#x3D; 号右边的结果 赋给 左边的变量，如 num &#x3D; 1 + 2 * 3，结果num的值为7</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 单个变量赋值</span></span><br><span class="line">num = <span class="number">10</span></span><br><span class="line"><span class="built_in">print</span>(num)	<span class="comment"># 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 同时为多个变量赋值(使用等号连接)</span></span><br><span class="line">a = b = <span class="number">4</span></span><br><span class="line"><span class="built_in">print</span>(a)	<span class="comment"># 4</span></span><br><span class="line"><span class="built_in">print</span>(b)	<span class="comment">#4</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 多个变量赋值(使用逗号分隔)</span></span><br><span class="line">num1, f1, str1 = <span class="number">100</span>, <span class="number">3.14</span>, <span class="string">&quot;hello&quot;</span></span><br><span class="line"><span class="built_in">print</span>(num1)	<span class="comment"># 100</span></span><br><span class="line"><span class="built_in">print</span>(f1)	<span class="comment"># 3.14</span></span><br><span class="line"><span class="built_in">print</span>(str1)	<span class="comment"># hello</span></span><br></pre></td></tr></table></figure></li>
<li>复合赋值运算符<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody><tr>
<td>+&#x3D;</td>
<td>加法赋值运算符</td>
<td>c +&#x3D; a 等效于 c &#x3D; c + a</td>
</tr>
<tr>
<td>-&#x3D;</td>
<td>减法赋值运算符</td>
<td>c -&#x3D; a 等效于 c &#x3D; c - a</td>
</tr>
<tr>
<td>*&#x3D;</td>
<td>乘法赋值运算符</td>
<td>c *&#x3D; a 等效于 c &#x3D; c * a</td>
</tr>
<tr>
<td>&#x2F;&#x3D;</td>
<td>除法赋值运算符</td>
<td>c &#x2F;&#x3D; a 等效于 c &#x3D; c &#x2F; a</td>
</tr>
<tr>
<td>&#x2F;&#x2F;&#x3D;</td>
<td>取整除赋值运算符</td>
<td>c &#x2F;&#x2F;&#x3D; a 等效于 c &#x3D; c &#x2F;&#x2F; a</td>
</tr>
<tr>
<td>%&#x3D;</td>
<td>取模赋值运算符</td>
<td>c %&#x3D; a 等效于 c &#x3D; c % a</td>
</tr>
<tr>
<td>**&#x3D;</td>
<td>幂赋值运算符</td>
<td>c **&#x3D; a 等效于 c &#x3D; c ** a</td>
</tr>
<tr>
<td><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例：*=，运算时，符号右侧的表达式先计算出结果，再与左边变量的值运算</span></span><br><span class="line">a=<span class="number">100</span></span><br><span class="line">a *= <span class="number">1</span>+<span class="number">2</span></span><br><span class="line"><span class="built_in">print</span>(a)	<span class="comment"># 300</span></span><br></pre></td></tr></table></figure></td>
<td></td>
<td></td>
</tr>
</tbody></table>
</li>
<li>比较运算符<br> 以下假设变量a为10，变量b为20<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody><tr>
<td>&#x3D;&#x3D;</td>
<td>等于：比较对象是否相等</td>
<td>(a&#x3D;&#x3D;b) 返回 False</td>
</tr>
<tr>
<td>!&#x3D;</td>
<td>不等于：比较两个对象是否不相等</td>
<td>(a!&#x3D;b) 返回 True</td>
</tr>
<tr>
<td>&gt;</td>
<td>大于：返回x是否大于y</td>
<td>(a&gt;b) 返回 False</td>
</tr>
<tr>
<td>&gt;&#x3D;</td>
<td>大于等于：返回x是否大于等于y</td>
<td>(a&gt;&#x3D;b) 返回 False</td>
</tr>
<tr>
<td>&lt;</td>
<td>小于：返回x是否小于y。所有比较运算符返回1表示真，返回0表示假。这分别与特殊的变量True和False等价</td>
<td>(a&lt;b) 返回 True</td>
</tr>
<tr>
<td>&lt;&#x3D;</td>
<td>小于等于：返回x是否小于等于y</td>
<td>(a&lt;&#x3D;b) 返回 True</td>
</tr>
</tbody></table>
</li>
<li>逻辑运算符<table>
<thead>
<tr>
<th>运算符</th>
<th>逻辑表达式</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody><tr>
<td>and</td>
<td>x and y</td>
<td>只要有一个运算数是 False，结果就是 False ；只有所有的运算数都为 True 时结果才是 True ，做取值运算时，取第一个为 False 的值，如果所有的值都为 True ，取最后一个值</td>
<td>True and True and False–&gt;结果为 False ；True and True and True–&gt;结果为 True</td>
</tr>
<tr>
<td>or</td>
<td>x or y</td>
<td>只要有一个运算数是 True ，结果就是 True ；只有所有的运算数都为 False 时，结果才是 False ，做取值运算时，取第一个为 True 的值，如果所有的值都为 False ，取最后一个值</td>
<td>False or False or True–&gt;结果为 True ；False or False or False–&gt;结果为 False</td>
</tr>
<tr>
<td>not</td>
<td>not x</td>
<td>布尔”非” - 如果 x 为 True，返回 False 。如果 x 为 False，它返回 True</td>
<td>not True –&gt; False</td>
</tr>
</tbody></table>
</li>
</ol>
</li>
<li><p>输入输出</p>
<ol>
<li>输出<ul>
<li>普通输出  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;普通输出&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
<li>格式化输出  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;我的姓名是%s, 年龄是%d&quot;</span> % (name, age))</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>输出<ul>
<li>在 Python 中，获取键盘输入的数据的方法是采用 input 函数  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">password = <span class="built_in">input</span>(<span class="string">&quot;请输入密码:&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;您刚刚输入的密码是:%s&#x27;</span> % password)</span><br></pre></td></tr></table></figure></li>
<li>input() 的小括号中放入的是提示信息，用来在获取数据之前给用户的一个简单提示</li>
<li>input() 在从键盘获取了数据以后，会存放到等号右边的变量中</li>
<li>input() 会把用户输入的任何值都作为字符串来对待</li>
</ul>
</li>
</ol>
</li>
<li><p>流程控制语句</p>
<ol>
<li>if 判断语句<br> if 语句是用来进行判断的 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 要判断的条件:</span><br><span class="line">	条件成立时，要做的事情</span><br></pre></td></tr></table></figure></li>
<li>if else<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 条件:</span><br><span class="line">	满足条件时的操作</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">	不满足条件时的操作</span><br></pre></td></tr></table></figure></li>
<li>elif <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> xxx1:</span><br><span class="line">	事情<span class="number">1</span></span><br><span class="line"><span class="keyword">elif</span> xxx2:</span><br><span class="line">	事情<span class="number">2</span></span><br><span class="line"><span class="keyword">elif</span> xxx3:</span><br><span class="line">	事情<span class="number">3</span></span><br></pre></td></tr></table></figure></li>
<li>for<br> 在 Python 中 for 循环可以遍历任何序列的项目，如一个列表或者一个字符串等 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> 临时变量 <span class="keyword">in</span> 列表或者字符串等可迭代对象:</span><br><span class="line">	循环满足条件时执行的代码</span><br></pre></td></tr></table></figure>
 for循环的使用<ul>
<li>遍历字符串  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> s <span class="keyword">in</span> <span class="string">&quot;hello&quot;</span>:</span><br><span class="line">	<span class="built_in">print</span>(s)	<span class="comment"># h e l l o</span></span><br></pre></td></tr></table></figure></li>
<li>打印数字  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">	<span class="built_in">print</span>(i)	<span class="comment"># 0 1 2 3 4</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>range<br> range 可以生成数字供 for 循环遍历,它可以传递三个参数，分别表示 起始、结束和步长</li>
</ol>
</li>
<li><p>数据类型高级</p>
<ol>
<li>字符串高级<table>
<thead>
<tr>
<th>函数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>len</td>
<td>len函数可以获取字符串的长度</td>
</tr>
<tr>
<td>find</td>
<td>查找指定内容在字符串中是否存在，如果存在就返回该内容在字符串中第一次出现的开始位置索引值，如果不存在，则返回-1</td>
</tr>
<tr>
<td>startswith&#x2F;endswith</td>
<td>判断字符串是不是以谁谁谁开头&#x2F;结尾</td>
</tr>
<tr>
<td>count</td>
<td>返回 str在start和end之间 在 mystr里面出现的次数</td>
</tr>
<tr>
<td>replace</td>
<td>替换字符串中指定的内容，如果指定次数count，则替换不会超过count次</td>
</tr>
<tr>
<td>split</td>
<td>通过参数的内容切割字符串</td>
</tr>
<tr>
<td>upper&#x2F;lower</td>
<td>将字符串中的大小写互换</td>
</tr>
<tr>
<td>strip</td>
<td>去空格</td>
</tr>
<tr>
<td>join</td>
<td>字符串拼接</td>
</tr>
</tbody></table>
</li>
<li>列表高级<br> 添加元素<ul>
<li>append 会把新元素添加到列表末尾  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">A = [<span class="string">&#x27;xiaoWang&#x27;</span>,<span class="string">&#x27;xiaoZhang&#x27;</span>,<span class="string">&#x27;xiaoHua&#x27;</span>]</span><br><span class="line"><span class="comment"># A=[&#x27;xiaoWang&#x27;, &#x27;xiaoZhang&#x27;, &#x27;xiaoHua&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;A=%s&quot;</span> % A)</span><br><span class="line">temp = <span class="string">&#x27;添加的元素&#x27;</span></span><br><span class="line">A.append(temp)</span><br><span class="line"><span class="comment"># A=[&#x27;xiaoWang&#x27;, &#x27;xiaoZhang&#x27;, &#x27;xiaoHua&#x27;, &#x27;添加的元素&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;A=%s&quot;</span> % A)</span><br></pre></td></tr></table></figure></li>
<li>insert(index, object) 在指定位置 index 前插入元素 object  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">strs = [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;m&#x27;</span>,<span class="string">&#x27;s&#x27;</span>]</span><br><span class="line">strs.insert(<span class="number">3</span>,<span class="string">&#x27;h&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(strs) <span class="comment"># [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;m&#x27;, &#x27;h&#x27;, &#x27;s&#x27;]</span></span><br></pre></td></tr></table></figure></li>
<li>通过 extend 可以将另一个列表中的元素逐一添加到列表中  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>]</span><br><span class="line">b = [<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;e&#x27;</span>,<span class="string">&#x27;f&#x27;</span>]</span><br><span class="line">a.extend(b)</span><br><span class="line"><span class="built_in">print</span>(a) <span class="comment"># [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;, &#x27;e&#x27;, &#x27;f&#x27;] 将 b 添加到 a 里</span></span><br><span class="line"><span class="built_in">print</span>(b) <span class="comment"># [&#x27;d&#x27;,&#x27;e&#x27;,&#x27;f&#x27;] b的内容不变</span></span><br></pre></td></tr></table></figure>
 删除元素</li>
<li>del：根据下标进行删除  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">movieName = [<span class="string">&#x27;加勒比海盗&#x27;</span>,<span class="string">&#x27;骇客帝国&#x27;</span>,<span class="string">&#x27;第一滴血&#x27;</span>,<span class="string">&#x27;指环王&#x27;</span>,<span class="string">&#x27;霍比特人&#x27;</span>,<span class="string">&#x27;速度与激情&#x27;</span>]</span><br><span class="line"><span class="comment"># movieName=[&#x27;加勒比海盗&#x27;, &#x27;骇客帝国&#x27;, &#x27;第一滴血&#x27;, &#x27;指环王&#x27;, &#x27;霍比特人&#x27;, &#x27;速度与激情&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;movieName=%s&#x27;</span> % movieName)</span><br><span class="line"><span class="keyword">del</span> movieName[<span class="number">2</span>]</span><br><span class="line"><span class="comment"># movieName=[&#x27;加勒比海盗&#x27;, &#x27;骇客帝国&#x27;, &#x27;指环王&#x27;, &#x27;霍比特人&#x27;, &#x27;速度与激情&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;movieName=%s&#x27;</span> % movieName)</span><br></pre></td></tr></table></figure></li>
<li>pop：删除最后一个元素  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">movieName = [<span class="string">&#x27;加勒比海盗&#x27;</span>,<span class="string">&#x27;骇客帝国&#x27;</span>,<span class="string">&#x27;第一滴血&#x27;</span>,<span class="string">&#x27;指环王&#x27;</span>,<span class="string">&#x27;霍比特人&#x27;</span>,<span class="string">&#x27;速度与激情&#x27;</span>]</span><br><span class="line"><span class="comment"># movieName=[&#x27;加勒比海盗&#x27;, &#x27;骇客帝国&#x27;, &#x27;第一滴血&#x27;, &#x27;指环王&#x27;, &#x27;霍比特人&#x27;, &#x27;速度与激情&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;movieName=%s&#x27;</span> % movieName)</span><br><span class="line">movieName.pop()</span><br><span class="line"><span class="comment"># movieName=[&#x27;加勒比海盗&#x27;, &#x27;骇客帝国&#x27;, &#x27;第一滴血&#x27;, &#x27;指环王&#x27;, &#x27;霍比特人&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;movieName=%s&#x27;</span> % movieName)</span><br></pre></td></tr></table></figure></li>
<li>remove：根据元素的值进行删除  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">movieName = [<span class="string">&#x27;加勒比海盗&#x27;</span>,<span class="string">&#x27;骇客帝国&#x27;</span>,<span class="string">&#x27;第一滴血&#x27;</span>,<span class="string">&#x27;指环王&#x27;</span>,<span class="string">&#x27;霍比特人&#x27;</span>,<span class="string">&#x27;速度与激情&#x27;</span>]</span><br><span class="line"><span class="comment"># movieName=[&#x27;加勒比海盗&#x27;, &#x27;骇客帝国&#x27;, &#x27;第一滴血&#x27;, &#x27;指环王&#x27;, &#x27;霍比特人&#x27;, &#x27;速度与激情&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;movieName=%s&#x27;</span> % movieName)</span><br><span class="line">movieName.remove(<span class="string">&#x27;指环王&#x27;</span>)</span><br><span class="line"><span class="comment"># movieName=[&#x27;加勒比海盗&#x27;, &#x27;骇客帝国&#x27;, &#x27;第一滴血&#x27;, &#x27;霍比特人&#x27;, &#x27;速度与激情&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;movieName=%s&#x27;</span> % movieName)</span><br></pre></td></tr></table></figure>
 修改元素</li>
<li>我们是通过指定下标来访问列表元素，因此修改元素的时候，为指定的列表下标赋值即可  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">A = [<span class="string">&#x27;xiaoWang&#x27;</span>,<span class="string">&#x27;xiaoZhang&#x27;</span>,<span class="string">&#x27;xiaoHua&#x27;</span>]</span><br><span class="line"><span class="comment"># A=[&#x27;xiaoWang&#x27;, &#x27;xiaoZhang&#x27;, &#x27;xiaoHua&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;A=%s&quot;</span> % A)</span><br><span class="line">A[<span class="number">1</span>] = <span class="string">&#x27;xiaoLu&#x27;</span></span><br><span class="line"><span class="comment"># A=[&#x27;xiaoWang&#x27;, &#x27;xiaoLu&#x27;, &#x27;xiaoHua&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;A=%s&quot;</span> % A)</span><br></pre></td></tr></table></figure>
 查找元素<br> 所谓的查找，就是看看指定的元素是否存在，主要包含以下 2 个方法</li>
<li>in（存在），如果存在那么结果为 true ，否则为 false</li>
<li>not in（不存在），如果不存在那么结果为 true，否则 false  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">nameList = [<span class="string">&#x27;xiaoWang&#x27;</span>,<span class="string">&#x27;xiaoZhang&#x27;</span>,<span class="string">&#x27;xiaoHua&#x27;</span>]</span><br><span class="line">findName = <span class="built_in">input</span>(<span class="string">&#x27;请输入要查找的姓名:&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> findName <span class="keyword">in</span> nameList:</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&#x27;在列表中找到了相同的名字&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&#x27;没有找到&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>元组高级<br> Python 的元组与列表类似，不同之处在于元组的元素不能修改。元组使用小括号，列表使用方括号<ul>
<li>访问元组  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tuple</span>=(<span class="string">&#x27;hello&#x27;</span>,<span class="number">12</span>,<span class="number">30</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">tuple</span>[<span class="number">0</span>])	<span class="comment"># hello</span></span><br></pre></td></tr></table></figure></li>
<li>修改元组  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tuple</span>=(<span class="string">&#x27;hello&#x27;</span>,<span class="number">12</span>,<span class="number">30</span>)</span><br><span class="line"><span class="built_in">tuple</span>[<span class="number">0</span>]=<span class="string">&#x27;world&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">Traceback (most recent call last):</span></span><br><span class="line"><span class="string">		File &quot;D:\我的下载2   代码和电路有关的\python\pyCharm\code\01.HelloWord\com\xc\HelloWord.py&quot;, line 2, in &lt;module&gt;</span></span><br><span class="line"><span class="string"> 		tuple[0]=&#x27;world&#x27;</span></span><br><span class="line"><span class="string"> 		~~~~~^^^</span></span><br><span class="line"><span class="string">TypeError: &#x27;tuple&#x27; object does not support item assignment</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure></li>
<li>python中不允许修改元组的数据，包括不能删除其中的元素</li>
<li>定义只有一个元素的元组，需要在唯一的元素后写一个逗号</li>
</ul>
</li>
<li>切片<ul>
<li>切片是指对操作的对象截取其中一部分的操作。字符串、列表、元组都支持切片操作</li>
<li>切片的语法：[起始:结束:步长]，也可以简化使用 [起始:结束]</li>
<li>注意：选取的区间从”起始”位开始，到”结束”位的前一位结束（不包含结束位本身)，步长表示选取间隔 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 索引是通过下标取某一个元素</span></span><br><span class="line"><span class="comment"># 切片是通过下标去某一段元素</span></span><br><span class="line"></span><br><span class="line">s = <span class="string">&#x27;Hello World!&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(s)</span><br><span class="line"><span class="built_in">print</span>(s[<span class="number">4</span>]) <span class="comment"># o 字符串里的第4个元素</span></span><br><span class="line"><span class="built_in">print</span>(s[<span class="number">3</span>:<span class="number">7</span>]) <span class="comment"># lo W 包含下标 3，不含下标 7</span></span><br><span class="line"><span class="built_in">print</span>(s[<span class="number">1</span>:]) <span class="comment"># ello World! 从下标为1开始，取出 后面所有的元素（没有结束位）</span></span><br><span class="line"><span class="built_in">print</span>(s[:<span class="number">4</span>]) <span class="comment"># Hell 从起始位置开始，取到 下标为4的前一个元素（不包括结束位本身）</span></span><br><span class="line"><span class="built_in">print</span>(s[<span class="number">1</span>:<span class="number">5</span>:<span class="number">2</span>]) <span class="comment"># el 从下标为1开始，取到下标为5的前一个元素，步长为2（不包括结束位本身）</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>字典高级<br> 查看元素<ul>
<li>除了使用 key 查找数据，还可以使用 get 来获取数据  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;班长&#x27;</span>,<span class="string">&#x27;age&#x27;</span>:<span class="number">18</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(info[<span class="string">&#x27;age&#x27;</span>]) <span class="comment"># 获取年龄 18</span></span><br><span class="line"><span class="comment"># print(info[&#x27;sex&#x27;]) # 获取不存在的key，会发生异常</span></span><br><span class="line"><span class="built_in">print</span>(info.get(<span class="string">&#x27;sex&#x27;</span>)) <span class="comment"># 获取不存在的key，获取到空的内容，不会出现异常，None</span></span><br><span class="line"><span class="built_in">print</span>(info.get(<span class="string">&#x27;sex&#x27;</span>, <span class="string">&#x27;男&#x27;</span>)) <span class="comment"># 获取不存在的key, 可以提供一个默认值，返回 男</span></span><br></pre></td></tr></table></figure>
 修改元素</li>
<li>字典的每个元素中的数据是可以修改的，只要通过 key 找到，即可修改  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;班长&#x27;</span>, <span class="string">&#x27;id&#x27;</span>:<span class="number">100</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;修改之前的字典为 %s:&#x27;</span> % info)</span><br><span class="line">info[<span class="string">&#x27;id&#x27;</span>] = <span class="number">200</span> <span class="comment"># 为已存在的键赋值就是修改</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;修改之后的字典为 %s:&#x27;</span> % info)	<span class="comment"># 修改之后的字典为 &#123;&#x27;name&#x27;: &#x27;班长&#x27;, &#x27;id&#x27;: 200&#125;:</span></span><br></pre></td></tr></table></figure>
 添加元素</li>
<li>如果在使用 变量名[‘键’] &#x3D; 数据 时，这个“键”在字典中，不存在，那么就会新增这个元素  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;班长&#x27;</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;添加之前的字典为:%s&#x27;</span> % info)</span><br><span class="line">info[<span class="string">&#x27;id&#x27;</span>] = <span class="number">100</span> <span class="comment"># 为不存在的键赋值就是添加元素</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;添加之后的字典为:%s&#x27;</span> % info)	<span class="comment"># 添加之后的字典为:&#123;&#x27;name&#x27;: &#x27;班长&#x27;, &#x27;id&#x27;: 100&#125;</span></span><br></pre></td></tr></table></figure>
 删除元素</li>
<li>del 删除指定的元素  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;班长&#x27;</span>, <span class="string">&#x27;id&#x27;</span>:<span class="number">100</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;删除前,%s&#x27;</span> % info)</span><br><span class="line"><span class="keyword">del</span> info[<span class="string">&#x27;name&#x27;</span>] <span class="comment"># del 可以通过键删除字典里的指定元素</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;删除后,%s&#x27;</span> % info)	<span class="comment"># 删除后,&#123;&#x27;id&#x27;: 100&#125;</span></span><br></pre></td></tr></table></figure></li>
<li>del 删除整个字典  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;monitor&#x27;</span>, <span class="string">&#x27;id&#x27;</span>:<span class="number">100</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;删除前,%s&#x27;</span>%info)</span><br><span class="line"><span class="keyword">del</span> info <span class="comment"># del 也可以直接删除变量</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 这句打印直接报错</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;删除后,%s&#x27;</span>%info)</span><br></pre></td></tr></table></figure></li>
<li>clear 清空整个字典  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;monitor&#x27;</span>, <span class="string">&#x27;id&#x27;</span>:<span class="number">100</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;清空前,%s&#x27;</span>%info)</span><br><span class="line">info.clear()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;清空后,%s&#x27;</span>%info)	<span class="comment"># 清空后,&#123;&#125;</span></span><br></pre></td></tr></table></figure>
 字典的遍历</li>
<li>遍历字典的 key（键）  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dict</span>=&#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;Mike&#x27;</span>,<span class="string">&#x27;age&#x27;</span>:<span class="number">18</span>&#125;</span><br><span class="line"><span class="keyword">for</span> key <span class="keyword">in</span> <span class="built_in">dict</span>.keys():</span><br><span class="line">    <span class="built_in">print</span>(key)</span><br></pre></td></tr></table></figure></li>
<li>遍历字典的 value（值）  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dict</span>=&#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;Mike&#x27;</span>,<span class="string">&#x27;age&#x27;</span>:<span class="number">18</span>&#125;</span><br><span class="line"><span class="keyword">for</span> key <span class="keyword">in</span> <span class="built_in">dict</span>.values():</span><br><span class="line">    <span class="built_in">print</span>(key)</span><br></pre></td></tr></table></figure></li>
<li>遍历字典的项（元素）  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dict</span>=&#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;Mike&#x27;</span>,<span class="string">&#x27;age&#x27;</span>:<span class="number">18</span>&#125;</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> <span class="built_in">dict</span>.items():</span><br><span class="line">    <span class="built_in">print</span>(item)</span><br></pre></td></tr></table></figure></li>
<li>遍历字典的 key-value（键值对）  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dict</span>=&#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;Mike&#x27;</span>,<span class="string">&#x27;age&#x27;</span>:<span class="number">18</span>&#125;</span><br><span class="line"><span class="keyword">for</span> key,value <span class="keyword">in</span> <span class="built_in">dict</span>.items():</span><br><span class="line">    <span class="built_in">print</span>(key,value)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
</li>
<li><p>函数</p>
<ol>
<li>定义函数 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">函数名</span>():</span><br><span class="line">	代码</span><br></pre></td></tr></table></figure></li>
<li>调用函数 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义完函数后，函数是不会自动执行的，需要调用它才可以</span></span><br><span class="line">f1()</span><br></pre></td></tr></table></figure></li>
<li>函数参数 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test</span>(<span class="params">a,b</span>):</span><br><span class="line">    <span class="built_in">print</span>(a,b)</span><br><span class="line">    </span><br><span class="line">test(<span class="number">1</span>,<span class="number">2</span>) <span class="comment"># 位置参数	1 2</span></span><br><span class="line">test(b=<span class="number">1</span>,a=<span class="number">2</span>) <span class="comment"># 关键字参数	2 1</span></span><br></pre></td></tr></table></figure></li>
<li>函数返回值 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">add2num</span>(<span class="params">a, b</span>):</span><br><span class="line">c = a+b</span><br><span class="line"><span class="keyword">return</span> c	<span class="comment"># return 后可以写变量名、计算表达式</span></span><br></pre></td></tr></table></figure></li>
<li>局部变量<ul>
<li>局部变量，就是在函数内部定义的变量</li>
<li>其作用范围是这个函数内部，即只能在这个函数中使用，在函数的外部是不能使用的</li>
</ul>
</li>
<li>全局变量<ul>
<li>如果一个变量，既能在一个函数中使用，也能在其他的函数中使用，这样的变量就是全局变量</li>
<li>在函数外边定义的变量叫做 全局变量</li>
<li>全局变量能够在所有的函数中进行访问</li>
</ul>
</li>
</ol>
</li>
<li><p>文件</p>
<ol>
<li><p>文件的打开与关闭<br> 打开文件&#x2F;创建文件</p>
<ul>
<li>在python，使用open函数，可以打开一个已经存在的文件，或者创建一个新文件</li>
<li>open(文件路径，访问模式) <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;test.txt&#x27;</span>, <span class="string">&#x27;w&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
<li>绝对路径：指的是绝对位置，完整地描述了目标的所在地，所有目录层级关系是一目了然的</li>
<li>相对路径：是从当前文件所在的文件夹开始的路径<ul>
<li>test.txt ，是在当前文件夹查找 test.txt 文件</li>
<li>.&#x2F;test.txt ，也是在当前文件夹里查找 test.txt 文件， .&#x2F; 表示的是当前文件夹</li>
<li>..&#x2F;test.txt ，从当前文件夹的上一级文件夹里查找 test.txt 文件。 ..&#x2F; 表示的是上一级文件夹</li>
<li>demo&#x2F;test.txt ，在当前文件夹里查找 demo 这个文件夹，并在这个文件夹里查找 test.txt 文件</li>
</ul>
</li>
<li>访问模式<table>
<thead>
<tr>
<th>访问模式</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>r</td>
<td>以只读方式打开文件。文件的指针将会放在文件的开头。如果文件不存在，则报错。这是默认模式</td>
</tr>
<tr>
<td>w</td>
<td>打开一个文件只用于写入。如果该文件已存在则将其覆盖。如果该文件不存在，创建新文件</td>
</tr>
<tr>
<td>a</td>
<td>打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入</td>
</tr>
<tr>
<td>r+</td>
<td>打开一个文件用于读写。文件指针将会放在文件的开头</td>
</tr>
<tr>
<td>w+</td>
<td>打开一个文件用于读写。如果该文件已存在则将其覆盖。如果该文件不存在，创建新文件</td>
</tr>
<tr>
<td>a+</td>
<td>打开一个文件用于读写。如果该文件已存在，文件指针将会放在文件的结尾。文件打开时会是追加模式。如果该文件不存在，创建新文件用于读写</td>
</tr>
<tr>
<td>rb</td>
<td>以二进制格式打开一个文件用于只读。文件指针将会放在文件的开头</td>
</tr>
<tr>
<td>wb</td>
<td>以二进制格式打开一个文件只用于写入。如果该文件已存在则将其覆盖。如果该文件不存在，创建新文件</td>
</tr>
<tr>
<td>ab</td>
<td>以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入</td>
</tr>
<tr>
<td>rb+</td>
<td>以二进制格式打开一个文件用于读写。文件指针将会放在文件的开头</td>
</tr>
<tr>
<td>wb+</td>
<td>以二进制格式打开一个文件用于读写。如果该文件已存在则将其覆盖。如果该文件不存在，创建新文件</td>
</tr>
<tr>
<td>ab+</td>
<td>以二进制格式打开一个文件用于读写。如果该文件已存在，文件指针将会放在文件的结尾。如果该文件不存在，创建新文件用于读写</td>
</tr>
<tr>
<td>关闭文件</td>
<td></td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 新建一个文件，文件名为:test.txt</span></span><br><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;test.txt&#x27;</span>, <span class="string">&#x27;w&#x27;</span>)</span><br><span class="line"><span class="comment"># 关闭这个文件</span></span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>文件的读写<br> 写数据(write)</p>
<ul>
<li>如果文件不存在，那么创建；如果存在那么就先清空，然后写入数据  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;test.txt&#x27;</span>, <span class="string">&#x27;w&#x27;</span>)</span><br><span class="line">f.write(<span class="string">&#x27;hello world, i am here!\n&#x27;</span> * <span class="number">5</span>)</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>
 读数据(read)</li>
<li>使用 read(num) 可以从文件中读取数据，num 表示要从文件中读取的数据的长度（单位是字节），如果没有传入 num ，那么就表示读取文件中所有的数据  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;test.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">content = f.read(<span class="number">5</span>) <span class="comment"># 最多读取5个数据</span></span><br><span class="line"><span class="built_in">print</span>(content)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;‐&quot;</span>*<span class="number">30</span>) <span class="comment"># 分割线，用来测试</span></span><br><span class="line">content = f.read() <span class="comment"># 从上次读取的位置继续读取剩下的所有的数据</span></span><br><span class="line"><span class="built_in">print</span>(content)</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure></li>
<li>如果用 open 打开文件时，如果使用的”r”，那么可以省略 open(‘test.txt’)</li>
</ul>
<p> 读数据（readline）</p>
<ul>
<li>readline 只用来读取一行数据</li>
</ul>
<p> 读数据（readlines）</p>
<ul>
<li>readlines可以按照行的方式把整个文件中的内容进行一次性读取，并且返回的是一个列表，其中每一行为列表的一个元素。</li>
</ul>
</li>
<li><p>序列化和反序列化</p>
<ul>
<li>通过文件操作，我们可以将字符串写入到一个本地文件。但是，如果是一个对象(例如列表、字典、元组等)，就无法直接写入到一个文件里，需要对这个对象进行序列化，然后才能写入到文件里</li>
<li>设计一套协议，按照某种规则，把内存中的数据转换为字节序列，保存到文件，这就是序列化，反之，从文件的字节序列恢复到内存中，就是反序列化<ul>
<li>对象—&gt;字节序列 &#x3D;&#x3D;&#x3D; 序列化</li>
<li>字节序列–&gt;对象 &#x3D;&#x3D;&#x3D;反序列化</li>
</ul>
</li>
<li>JSON 模块</li>
<li>JSON提供了 dump 和 dumps 方法，将一个对象进行序列化</li>
<li>dumps 方法的作用是把对象转换成为字符串，它本身不具备将数据写入到文件的功能   <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line">file = <span class="built_in">open</span>(<span class="string">&#x27;names.txt&#x27;</span>, <span class="string">&#x27;w&#x27;</span>)</span><br><span class="line">names = [<span class="string">&#x27;zhangsan&#x27;</span>, <span class="string">&#x27;lisi&#x27;</span>, <span class="string">&#x27;wangwu&#x27;</span>, <span class="string">&#x27;jerry&#x27;</span>, <span class="string">&#x27;henry&#x27;</span>, <span class="string">&#x27;merry&#x27;</span>, <span class="string">&#x27;chris&#x27;</span>]</span><br><span class="line"><span class="comment"># file.write(names) 出错，不能直接将列表写入到文件里</span></span><br><span class="line"><span class="comment"># 可以调用 json的dumps方法，传入一个对象参数</span></span><br><span class="line">result = json.dumps(names)</span><br><span class="line"><span class="comment"># dumps 方法得到的结果是一个字符串</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(result)) <span class="comment"># &lt;class &#x27;str&#x27;&gt;</span></span><br><span class="line"><span class="comment"># 可以将字符串写入到文件里</span></span><br><span class="line">file.write(result)</span><br><span class="line">file.close()</span><br></pre></td></tr></table></figure></li>
<li>dump 方法可以在将对象转换成为字符串的同时，指定一个文件对象，把转换后的字符串写入到这个文件里  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line">file = <span class="built_in">open</span>(<span class="string">&#x27;names.txt&#x27;</span>, <span class="string">&#x27;w&#x27;</span>)</span><br><span class="line">names = [<span class="string">&#x27;zhangsan&#x27;</span>, <span class="string">&#x27;lisi&#x27;</span>, <span class="string">&#x27;wangwu&#x27;</span>, <span class="string">&#x27;jerry&#x27;</span>, <span class="string">&#x27;henry&#x27;</span>, <span class="string">&#x27;merry&#x27;</span>, <span class="string">&#x27;chris&#x27;</span>]</span><br><span class="line"><span class="comment"># dump方法可以接收一个文件参数，在将对象转换成为字符串的同时写入到文件里</span></span><br><span class="line">json.dump(names, file)</span><br><span class="line">file.close()</span><br></pre></td></tr></table></figure></li>
<li>使用 JSON 实现反序列化</li>
<li>使用 loads 和 load 方法，可以将一个 JSON 字符串反序列化成为一个 Python 对象</li>
<li>loads 方法需要一个字符串参数，用来将一个字符串加载成为 Python 对象  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="comment"># 调用 loads 方法，传入一个字符串，可以将这个字符串加载成为 Python 对象</span></span><br><span class="line">result = json.loads(<span class="string">&#x27;[&quot;zhangsan&quot;, &quot;lisi&quot;, &quot;wangwu&quot;, &quot;jerry&quot;, &quot;henry&quot;, &quot;merry&quot;, &quot;chris&quot;]&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(result))	<span class="comment"># &lt;class &#x27;list&#x27;&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>load 方法可以传入一个文件对象，用来将一个文件对象里的数据加载成为 Python 对象  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="comment"># 以可读方式打开一个文件</span></span><br><span class="line">file = <span class="built_in">open</span>(<span class="string">&#x27;names.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line"><span class="comment"># 调用 load 方法，将文件里的内容加载成为一个 Python 对象</span></span><br><span class="line">result = json.load(file)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line">file.close()</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
</li>
<li><p>异常</p>
<pre><code>程序在运行过程中，由于我们的编码不规范，或者其他原因一些客观原因，
导致我们的程序无法继续运行，此时，程序就会出现异常。
如果我们不对异常进行处理，程序可能会由于异常直接中断掉。
为了保证程序的健壮性，我们在程序设计里提出了异常处理这个概念
</code></pre>
<ol>
<li>读取文件异常<ul>
<li>在读取一个文件时，如果这个文件不存在，则会报出 FileNotFoundError 错误</li>
</ul>
</li>
<li>try…except 语句<ul>
<li>try…except 语句可以对代码运行过程中可能出现的异常进行处理  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">	可能会出现异常的代码块</span><br><span class="line"><span class="keyword">except</span> 异常的类型:</span><br><span class="line">	出现异常以后的处理语句</span><br></pre></td></tr></table></figure>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">	f = <span class="built_in">open</span>(<span class="string">&#x27;test.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">	<span class="built_in">print</span>(f.read())</span><br><span class="line"><span class="keyword">except</span> FileNotFoundError:</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&#x27;文件没有找到,请检查文件名称是否正确&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
</li>
</ol>
<h2 id="二-Urllib"><a href="#二-Urllib" class="headerlink" title="二 Urllib"></a>二 Urllib</h2><h3 id="1-Urllib-介绍"><a href="#1-Urllib-介绍" class="headerlink" title="1.Urllib 介绍"></a>1.Urllib 介绍</h3><ol>
<li><p>什么是互联网爬虫<br> <img src="https://img-blog.csdnimg.cn/32ed57b9177449a586bc52bd73ea8c31.png" alt="在这里插入图片描述"></p>
<ul>
<li>如果我们把互联网比作一张大的蜘蛛网，那一台计算机上的数据便是蜘蛛网上的一个猎物，而爬虫程序就是一只小蜘蛛，沿着蜘蛛网抓取自己想要的数据</li>
</ul>
</li>
<li><p>爬虫核心</p>
<ul>
<li>爬取网页：爬取整个网页 包含了网页中所有得内容</li>
<li>解析数据：将网页中你得到的数据 进行解析</li>
<li>难点：爬虫和反爬虫之间的博弈</li>
</ul>
</li>
<li><p>爬虫的用途</p>
<ul>
<li>数据分析 &#x2F; 人工数据集</li>
<li>社交软件冷启动</li>
<li>舆情监控</li>
<li>竞争对手监控</li>
</ul>
</li>
<li><p>爬虫分类</p>
<pre><code> 通用爬虫：
     实例
         百度、360、google、sougou 等搜索引擎‐‐‐伯乐在线
     功能
         访问网页‐&gt;抓取数据‐&gt;数据存储‐&gt;数据处理‐&gt;提供检索服务
     robots协议
         一个约定俗成的协议，添加 robots.txt 文件，来说明本网站哪些内容不可以被抓取，起不到限制作用
         自己写的爬虫无需遵守
     网站排名(SEO)
         1. 根据 pagerank 算法值进行排名（参考个网站流量、点击率等指标）
         2. 百度竞价排名
     缺点
         1. 抓取的数据大多是无用的
         2.不能根据用户的需求来精准获取数据
 
 聚焦爬虫：
     功能
         根据需求，实现爬虫程序，抓取需要的数据
     设计思路
         1.确定要爬取的 url
     如何获取 Url
         2.模拟浏览器通过 http 协议访问 url ，获取服务器返回的 html 代码
     如何访问
         3.解析 html 字符串（根据一定规则提取需要的数据）
     如何解析
</code></pre>
</li>
<li><p>反爬手段</p>
<ol>
<li>User‐Agent<ul>
<li>User Agent中文名为用户代理，简称 UA，它是一个特殊字符串头，使得服务器能够识别客户使用的操作系统及版本、CPU 类型、浏览器及版本、浏览器渲染引擎、浏览器语言、浏览器插件等</li>
</ul>
</li>
<li>代理 IP<ul>
<li>西次代理 and 快代理</li>
<li>什么是高匿名、匿名和透明代理？它们有什么区别<ul>
<li>使用透明代理，对方服务器可以知道你使用了代理，并且也知道你的真实 IP</li>
<li>使用匿名代理，对方服务器可以知道你使用了代理，但不知道你的真实 IP</li>
<li>使用高匿名代理，对方服务器不知道你使用了代理，更不知道你的真实 IP</li>
</ul>
</li>
</ul>
</li>
<li>.验证码访问<ul>
<li>打码平台：云打码平台</li>
</ul>
</li>
<li>动态加载网页<ul>
<li>网站返回的是js数据 并不是网页的真实数据</li>
<li>selenium 驱动真实的浏览器发送请求</li>
</ul>
</li>
<li>数据加密<ul>
<li>分析 js 代码</li>
</ul>
</li>
</ol>
</li>
</ol>
<h3 id="2-Urllib-库使用以及请求对象的定制"><a href="#2-Urllib-库使用以及请求对象的定制" class="headerlink" title="2.Urllib 库使用以及请求对象的定制"></a>2.Urllib 库使用以及请求对象的定制</h3><ol>
<li><p>Urllib 库使用</p>
<pre><code> urllib.request.urlopen() 模拟浏览器向服务器发送请求
 response 服务器返回的数据
     response的数据类型是 HttpResponse
     字节‐‐&gt;字符串
         解码 decode
     字符串‐‐&gt;字节
         编码 encode
     read() 字节形式读取二进制 扩展：rede(5) 返回前几个字节
     readline() 读取一行
     readlines() 一行一行读取 直至结束
     getcode() 获取状态码
     geturl() 获取 url
     getheaders() 获取 headers
 urllib.request.urlretrieve()
     请求网页
     请求图片
     请求视频
</code></pre>
</li>
<li><p>请求对象的定制</p>
<ul>
<li>UA 介绍：User Agent 中文名为用户代理，简称 UA，它是一个特殊字符串头，使得服务器能够识别客户使用的操作系统及版本、CPU 类型、浏览器及版本。浏览器内核、浏览器渲染引擎、浏览器语言、浏览器插件等</li>
<li>语法：request &#x3D; urllib.request.Request()</li>
</ul>
</li>
</ol>
<h3 id="3-编解码"><a href="#3-编解码" class="headerlink" title="3.编解码"></a>3.编解码</h3><ol>
<li>介绍：由于计算机是美国人发明的，因此，最早只有 127 个字符被编码到计算机里，也就是大小写英文字母、数字和一些符号，这个编码表被称为ASCII编码，比如大写字母A的编码是 65，小写字母z的编码是 122。但是要处理中文显然一个字节是不够的，至少需要两个字节，而且还不能和 ASCII 编码冲突，所以，中国制定了 GB2312 编码，用来把中文编进去。你可以想得到的是，全世界有上百种语言，日本把日文编到 Shift_JIS 里，韩国把韩文编到 Euc‐kr 里，各国有各国的标准，就会不可避免地出现冲突，结果就是，在多语言混合的文本中，显示出来会有乱码。因此，Unicode 应运而生。Unicode 把所有语言都统一到一套编码里，这样就不会再有乱码问题了。Unicode 标准也在不断发展，但最常用的是用两个字节表示一个字符（如果要用到非常偏僻的字符，就需要 4 个字节）。现代操作系统和大多数编程语言都直接支持 Unicode</li>
<li>get 请求方式：urllib.parse.quote（） <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> urllib.parse</span><br><span class="line">url = <span class="string">&#x27;https://www.baidu.com/s?wd=&#x27;</span></span><br><span class="line">headers = &#123;</span><br><span class="line"><span class="string">&#x27;User‐Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, likeGecko) Chrome/74.0.3729.169 Safari/537.36&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">url = url + urllib.parse.quote(<span class="string">&#x27;小野&#x27;</span>)</span><br><span class="line">request = urllib.request.Request(url=url,headers=headers)</span><br><span class="line">response = urllib.request.urlopen(request)</span><br><span class="line">content=response.read().decode(<span class="string">&#x27;utf‐8&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(content)</span><br></pre></td></tr></table></figure></li>
<li>get 请求方式：urllib.parse.urlencode（） <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> urllib.parse</span><br><span class="line">url = <span class="string">&#x27;http://www.baidu.com/s?&#x27;</span></span><br><span class="line">data = &#123;</span><br><span class="line"><span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;小刚&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;sex&#x27;</span>:<span class="string">&#x27;男&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line">data = urllib.parse.urlencode(data)</span><br><span class="line">url = url + data</span><br><span class="line"><span class="built_in">print</span>(url)</span><br><span class="line">headers = &#123;</span><br><span class="line"><span class="string">&#x27;User‐Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, likeGecko) Chrome/74.0.3729.169 Safari/537.36&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">request = urllib.request.Request(url=url,headers=headers)</span><br><span class="line">response = urllib.request.urlopen(request)</span><br><span class="line">content=response.read().decode(<span class="string">&#x27;utf‐8&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(content)</span><br></pre></td></tr></table></figure></li>
<li>post 请求方式 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> urllib.parse</span><br><span class="line"></span><br><span class="line">url = <span class="string">&#x27;https://fanyi.baidu.com/sug&#x27;</span></span><br><span class="line">headers = &#123;</span><br><span class="line"><span class="string">&#x27;user‐agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, likeGecko) Chrome/74.0.3729.169 Safari/537.36&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">keyword = <span class="built_in">input</span>(<span class="string">&#x27;请输入您要查询的单词&#x27;</span>)</span><br><span class="line">data = &#123;</span><br><span class="line"><span class="string">&#x27;kw&#x27;</span>:keyword</span><br><span class="line">&#125;</span><br><span class="line">data = urllib.parse.urlencode(data).encode(<span class="string">&#x27;utf‐8&#x27;</span>)</span><br><span class="line">request = urllib.request.Request(url=url,headers=headers,data=data)</span><br><span class="line">response = urllib.request.urlopen(request)</span><br><span class="line">content=response.read().decode(<span class="string">&#x27;utf‐8&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(content)</span><br></pre></td></tr></table></figure></li>
<li>post 和 get 区别<ul>
<li>get 请求方式的参数必须编码，参数是拼接到 url 后面，编码之后不需要调用 encode 方法</li>
<li>post请求方式的参数必须编码，参数是放在请求对象定制的方法中，编码之后需要调用 encode 方法</li>
</ul>
</li>
<li>案例1：百度详细翻译 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> urllib.parse</span><br><span class="line">url = <span class="string">&#x27;https://fanyi.baidu.com/v2transapi&#x27;</span></span><br><span class="line">headers = &#123;</span><br><span class="line">	<span class="comment"># &#x27;:authority&#x27;: &#x27;fanyi.baidu.com&#x27;,</span></span><br><span class="line">	<span class="comment"># &#x27;:method&#x27;: &#x27;POST&#x27;,</span></span><br><span class="line">	<span class="comment"># &#x27;:path&#x27;: &#x27;/v2transapi&#x27;,</span></span><br><span class="line">	<span class="comment"># &#x27;:scheme&#x27;: &#x27;https&#x27;,</span></span><br><span class="line">	<span class="comment"># &#x27;accept&#x27;: &#x27;*/*&#x27;,</span></span><br><span class="line">	<span class="comment"># &#x27;accept‐encoding&#x27;: &#x27;gzip, deflate, br&#x27;,</span></span><br><span class="line">	<span class="comment"># &#x27;accept‐language&#x27;: &#x27;zh‐CN,zh;q=0.9&#x27;,</span></span><br><span class="line">	<span class="comment"># &#x27;content‐length&#x27;: &#x27;119&#x27;,</span></span><br><span class="line">	<span class="comment"># &#x27;content‐type&#x27;: &#x27;application/x‐www‐form‐urlencoded; charset=UTF‐8&#x27;,</span></span><br><span class="line">	<span class="string">&#x27;cookie&#x27;</span>:<span class="string">&#x27;REALTIME_TRANS_SWITCH=1;FANYI_WORD_SWITCH=1;HISTORY_SWITCH=1;SOUND_SPD_SWITCH=1;SOUND_PREFER_SWITCH=1;PSTM=1537097513;BIDUPSID=D96F9A49A8630C54630DD60CE082A55C;BAIDUID=0814C35D13AE23F5EAFA8E0B24D9B436:FG=1;to_lang_often=%5B%7B%22value%22%3A%22en%22%2C%22text%22%3A%22%u82F1%u8BED%22%7D%2C%7B%22value%22%3A%22zh%22%2C%22text%22%3A%22%u4E2D%u6587%22%7D%5D;from_lang_often=%5B%7B%22value%22%3A%22zh%22%2C%22text%22%3A%22%u4E2D%u6587%22%7D%2C%7B%22value%22%3A%22en%22%2C%22text%22%3A%22%u82F1%u8BED%22%7D%5D;BDORZ=B490B5EBF6F3CD402E515D22BCDA1598;delPer=0;H_PS_PSSID=1424_21115_29522_29519_29099_29568_28835_29220_26350;PSINO=2;locale=zh;Hm_lvt_64ecd82404c51e03dc91cb9e8c025574=1563000604,1563334706,1565592510;Hm_lpvt_64ecd82404c51e03dc91cb9e8c025574=1565592510;yjs_js_security_passport=2379b52646498f3b5d216e6b21c6f1c7bf00f062_1565592544_js&#x27;</span>,</span><br><span class="line">	<span class="comment"># &#x27;origin&#x27;: &#x27;https://fanyi.baidu.com&#x27;,</span></span><br><span class="line">	<span class="comment"># &#x27;referer&#x27;: &#x27;https://fanyi.baidu.com/translate?aldtype=16047&amp;query=&amp;keyfrom=baidu&amp;smartresult=dict&amp;lang=auto2zh&#x27;,</span></span><br><span class="line">	<span class="comment"># &#x27;sec‐fetch‐mode&#x27;: &#x27;cors&#x27;,</span></span><br><span class="line">	<span class="comment"># &#x27;sec‐fetch‐site&#x27;: &#x27;same‐origin&#x27;,</span></span><br><span class="line">	<span class="comment"># &#x27;user‐agent&#x27;: &#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, likeGecko) Chrome/76.0.3809.100 Safari/537.36&#x27;,</span></span><br><span class="line">	<span class="comment"># &#x27;x‐requested‐with&#x27;: &#x27;XMLHttpRequest&#x27;,</span></span><br><span class="line">&#125;</span><br><span class="line">data = &#123;</span><br><span class="line">	<span class="string">&#x27;from&#x27;</span>: <span class="string">&#x27;en&#x27;</span>,</span><br><span class="line">	<span class="string">&#x27;to&#x27;</span>: <span class="string">&#x27;zh&#x27;</span>,</span><br><span class="line">	<span class="string">&#x27;query&#x27;</span>: <span class="string">&#x27;you&#x27;</span>,</span><br><span class="line">	<span class="string">&#x27;transtype&#x27;</span>: <span class="string">&#x27;realtime&#x27;</span>,</span><br><span class="line">	<span class="string">&#x27;simple_means_flag&#x27;</span>: <span class="string">&#x27;3&#x27;</span>,</span><br><span class="line">	<span class="string">&#x27;sign&#x27;</span>: <span class="string">&#x27;269482.65435&#x27;</span>,</span><br><span class="line">	<span class="string">&#x27;token&#x27;</span>: <span class="string">&#x27;2e0f1cb44414248f3a2b49fbad28bbd5&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#参数的编码</span></span><br><span class="line">data = urllib.parse.urlencode(data).encode(<span class="string">&#x27;utf‐8&#x27;</span>)</span><br><span class="line"><span class="comment"># 请求对象的定制</span></span><br><span class="line">request = urllib.request.Request(url=url,headers=headers,data=data)</span><br><span class="line">response = urllib.request.urlopen(request)</span><br><span class="line"><span class="comment"># 请求之后返回的所有的数据</span></span><br><span class="line">content = response.read().decode(<span class="string">&#x27;utf‐8&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="comment"># loads将字符串转换为python对象</span></span><br><span class="line">obj = json.loads(content)</span><br><span class="line"><span class="comment"># python对象转换为json字符串 ensure_ascii=False 忽略字符集编码</span></span><br><span class="line">s = json.dumps(obj,ensure_ascii=<span class="literal">False</span>)</span><br><span class="line"><span class="built_in">print</span>(s)</span><br></pre></td></tr></table></figure></li>
<li>案例2：豆瓣电影（ajax 的 get 请求） <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 爬取豆瓣电影前10页数据</span></span><br><span class="line"><span class="comment"># https://movie.douban.com/j/chart/top_list?type=20&amp;interval_id=100%3A90&amp;action=&amp;start=0&amp;limit=20</span></span><br><span class="line"><span class="comment"># https://movie.douban.com/j/chart/top_list?type=20&amp;interval_id=100%3A90&amp;action=&amp;start=20&amp;limit=20</span></span><br><span class="line"><span class="comment"># https://movie.douban.com/j/chart/top_list?type=20&amp;interval_id=100%3A90&amp;action=&amp;start=40&amp;limit=20</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> urllib.parse</span><br><span class="line"><span class="comment"># 下载前10页数据</span></span><br><span class="line"><span class="comment"># 下载的步骤：1.请求对象的定制 2.获取响应的数据 3.下载</span></span><br><span class="line"><span class="comment"># 每执行一次返回一个request对象</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_request</span>(<span class="params">page</span>):</span><br><span class="line">	base_url = <span class="string">&#x27;https://movie.douban.com/j/chart/top_list?type=20&amp;interval_id=100%3A90&amp;action=&amp;&#x27;</span></span><br><span class="line">	headers = &#123;</span><br><span class="line">		<span class="string">&#x27;User‐Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/76.0.3809.100 Safari/537.36&#x27;</span></span><br><span class="line">	&#125;</span><br><span class="line">	data=&#123;</span><br><span class="line">		<span class="comment"># 1 2 3 4</span></span><br><span class="line">		<span class="comment"># 0 20 40 60</span></span><br><span class="line">		<span class="string">&#x27;start&#x27;</span>:(page‐<span class="number">1</span>)*<span class="number">20</span>,</span><br><span class="line">		<span class="string">&#x27;limit&#x27;</span>:<span class="number">20</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment"># data编码</span></span><br><span class="line">	data = urllib.parse.urlencode(data)</span><br><span class="line">	url = base_url + data</span><br><span class="line">	request = urllib.request.Request(url=url,headers=headers)</span><br><span class="line">	<span class="keyword">return</span> request</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取网页源码</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_content</span>(<span class="params">request</span>):</span><br><span class="line">	response = urllib.request.urlopen(request)</span><br><span class="line">	content = response.read().decode(<span class="string">&#x27;utf‐8&#x27;</span>)</span><br><span class="line">	<span class="keyword">return</span> content</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">down_load</span>(<span class="params">page,content</span>):</span><br><span class="line">	<span class="comment"># with open（文件的名字，模式，编码）as fp:</span></span><br><span class="line">	<span class="comment"># fp.write(内容)</span></span><br><span class="line">	<span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;douban_&#x27;</span>+<span class="built_in">str</span>(page)+<span class="string">&#x27;.json&#x27;</span>,<span class="string">&#x27;w&#x27;</span>,encoding=<span class="string">&#x27;utf‐8&#x27;</span>)<span class="keyword">as</span> fp:</span><br><span class="line">		fp.write(content)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">	start_page = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;请输入起始页码&#x27;</span>))</span><br><span class="line">	end_page = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;请输入结束页码&#x27;</span>))</span><br><span class="line">	<span class="keyword">for</span> page <span class="keyword">in</span> <span class="built_in">range</span>(start_page,end_page+<span class="number">1</span>):</span><br><span class="line">		request = create_request(page)</span><br><span class="line">		content = get_content(request)</span><br><span class="line">		down_load(page,content)</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="4-URLError-HTTPError"><a href="#4-URLError-HTTPError" class="headerlink" title="4.URLError \ HTTPError"></a>4.URLError \ HTTPError</h3><ol>
<li>简介<ul>
<li>.HTTPError 类是 URLError 类的子类</li>
<li>.导入的包 urllib.error.HTTPError &#x2F; urllib.error.URLError</li>
<li>.http 错误：http 错误是针对浏览器无法连接到服务器而增加出来的错误提示。引导并告诉浏览者该页是哪里出了问题</li>
<li>通过 urllib 发送请求的时候，有可能会发送失败，这个时候如果想让你的代码更加的健壮，可以通过 try‐except 进行捕获异常，异常有两类，URLError \ HTTPError</li>
</ul>
</li>
<li>示例 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> urllib.error</span><br><span class="line"></span><br><span class="line">url = <span class="string">&#x27;https://blog.csdn.net/ityard/article/details/102646738&#x27;</span></span><br><span class="line"><span class="comment"># url = &#x27;http://www.goudan11111.com&#x27;</span></span><br><span class="line">headers = &#123;</span><br><span class="line">	<span class="comment">#&#x27;Accept&#x27;:&#x27;text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed‐exchange;v=b3&#x27;,</span></span><br><span class="line">	<span class="comment"># &#x27;Accept‐Encoding&#x27;: &#x27;gzip, deflate, br&#x27;,</span></span><br><span class="line">	<span class="comment"># &#x27;Accept‐Language&#x27;: &#x27;zh‐CN,zh;q=0.9&#x27;,</span></span><br><span class="line">	<span class="comment"># &#x27;Cache‐Control&#x27;: &#x27;max‐age=0&#x27;,</span></span><br><span class="line">	<span class="comment"># &#x27;Connection&#x27;: &#x27;keep‐alive&#x27;,</span></span><br><span class="line">	<span class="string">&#x27;Cookie&#x27;</span>: <span class="string">&#x27;uuid_tt_dd=10_19284691370‐1530006813444‐566189;smidV2=2018091619443662be2b30145de89bbb07f3f93a3167b80002b53e7acc61420;_ga=GA1.2.1823123463.1543288103;dc_session_id=10_1550457613466.265727;acw_tc=2760821d15710446036596250e10a1a7c89c3593e79928b22b3e3e2bc98b89;Hm_lvt_e5ef47b9f471504959267fd614d579cd=1571329184;Hm_ct_e5ef47b9f471504959267fd614d579cd=6525*1*10_19284691370‐1530006813444‐566189;__yadk_uid=r0LSXrcNYgymXooFiLaCGt1ahSCSxMCb;Hm_lvt_6bcd52f51e9b3dce32bec4a3997715ac=1571329199,1571329223,1571713144,1571799968;acw_sc__v2=5dafc3b3bc5fad549cbdea513e330fbbbee00e25; firstDie=1; SESSION=396bc85c‐556b‐42bd‐890c‐c20adaaa1e47;UserName=weixin_42565646;UserInfo=d34ab5352bfa4f21b1eb68cdacd74768;UserToken=d34ab5352bfa4f21b1eb68cdacd74768; UserNick=weixin_42565646; AU=7A5;UN=weixin_42565646; BT=1571800370777; p_uid=U000000; dc_tos=pzt4xf;Hm_lpvt_6bcd52f51e9b3dce32bec4a3997715ac=1571800372;Hm_ct_6bcd52f51e9b3dce32bec4a3997715ac=1788*1*PC_VC!6525*1*10_19284691370‐1530006813444‐566189!5744*1*weixin_42565646;announcement=%257B%2522isLogin%2522%253Atrue%252C%2522announcementUrl%2522%253A%2522https%253A%252F%252Fblogdev.blog.csdn.net%252Farticle%252Fdetails%252F102605809%2522%252C%2522announcementCount%2522%253A0%252C%2522announcementExpire%2522%253A3600000%257D&#x27;</span>,</span><br><span class="line">	<span class="comment"># &#x27;Host&#x27;: &#x27;blog.csdn.net&#x27;,</span></span><br><span class="line">	<span class="comment"># &#x27;Referer&#x27;: &#x27;https://passport.csdn.net/login?code=public&#x27;,</span></span><br><span class="line">	<span class="comment"># &#x27;Sec‐Fetch‐Mode&#x27;: &#x27;navigate&#x27;,</span></span><br><span class="line">	<span class="comment"># &#x27;Sec‐Fetch‐Site&#x27;: &#x27;same‐site&#x27;,</span></span><br><span class="line">	<span class="comment"># &#x27;Sec‐Fetch‐User&#x27;: &#x27;?1&#x27;,</span></span><br><span class="line">	<span class="comment"># &#x27;Upgrade‐Insecure‐Requests&#x27;: &#x27;1&#x27;,</span></span><br><span class="line">	<span class="string">&#x27;User‐Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, likeGecko) Chrome/77.0.3865.120 Safari/537.36&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">	request = urllib.request.Request(url=url,headers=headers)</span><br><span class="line">	response = urllib.request.urlopen(request)</span><br><span class="line">	content = response.read().decode(<span class="string">&#x27;utf‐8&#x27;</span>)</span><br><span class="line">	<span class="built_in">print</span>(content)</span><br><span class="line"><span class="keyword">except</span> urllib.error.HTTPError:</span><br><span class="line">	<span class="built_in">print</span>(<span class="number">1111</span>)</span><br><span class="line"><span class="keyword">except</span> urllib.error.URLError:</span><br><span class="line">	<span class="built_in">print</span>(<span class="number">2222</span>)</span><br></pre></td></tr></table></figure></li>
<li>.cookie 登录</li>
</ol>
<h3 id="5-Handler-处理器与代理服务器"><a href="#5-Handler-处理器与代理服务器" class="headerlink" title="5.Handler 处理器与代理服务器"></a>5.Handler 处理器与代理服务器</h3><ol>
<li>为什么要学习 handler<ul>
<li>urllib.request.urlopen(url)：不能定制请求头</li>
<li>urllib.request.Request(url,headers,data)：可以定制请求头</li>
<li>Handler：定制更高级的请求头，随着业务逻辑的复杂 请求对象的定制已经满足不了我们的需求（动态cookie和代理不能使用请求对象的定制）</li>
</ul>
</li>
<li>handler 示例 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line">url = <span class="string">&#x27;http://www.baidu.com&#x27;</span></span><br><span class="line">headers = &#123;</span><br><span class="line">	<span class="string">&#x27;User ‐ Agent&#x27;</span>: <span class="string">&#x27;Mozilla / 5.0(Windows NT 10.0;Win64;x64) AppleWebKit / 537.36(KHTML,likeGecko) Chrome / 74.0.3729.169Safari / 537.36&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">request = urllib.request.Request(url=url,headers=headers)</span><br><span class="line"></span><br><span class="line">handler = urllib.request.HTTPHandler()</span><br><span class="line">opener = urllib.request.build_opener(handler)</span><br><span class="line">response = opener.<span class="built_in">open</span>(request)</span><br><span class="line"></span><br><span class="line">content=response.read().decode(<span class="string">&#x27;utf‐8&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(content)</span><br></pre></td></tr></table></figure></li>
<li>代理的常用功能<ul>
<li>突破自身IP访问限制，访问国外站点</li>
<li>访问一些单位或团体内部资源<ul>
<li>扩展：某大学FTP(前提是该代理地址在该资源的允许访问范围之内)，使用教育网内地址段免费代理服务器，就可以用于对教育网开放的各类 FTP 下载上传，以及各类资料查询共享等服务）</li>
</ul>
</li>
<li>提高访问速度<ul>
<li>扩展：通常代理服务器都设置一个较大的硬盘缓冲区，当有外界的信息通过时，同时也将其保存到缓冲区中，当其他用户再访问相同的信息时， 则直接由缓冲区中取出信息，传给用户，以提高访问速度</li>
</ul>
</li>
<li>隐藏真实 IP<ul>
<li>扩展：上网者也可以通过这种方法隐藏自己的 IP，免受攻击</li>
</ul>
</li>
</ul>
</li>
<li>代码配置代理<ol>
<li>创建 Reuqest 对象</li>
<li>创建 ProxyHandler 对象</li>
<li>用 handler 对象创建 opener 对象</li>
<li>使用 opener.open 函数发送请求</li>
</ol>
</li>
<li>代理示例 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line">url = <span class="string">&#x27;http://www.baidu.com/s?wd=ip&#x27;</span></span><br><span class="line">headers = &#123;</span><br><span class="line"><span class="string">&#x27;User ‐ Agent&#x27;</span>: <span class="string">&#x27;Mozilla / 5.0(Windows NT 10.0;Win64;x64) AppleWebKit / 537.36(KHTML,likeGecko) Chrome / 74.0.3729.169Safari / 537.36&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">request = urllib.request.Request(url=url,headers=headers)</span><br><span class="line">proxies = &#123;<span class="string">&#x27;http&#x27;</span>:<span class="string">&#x27;117.141.155.244:53281&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line">handler = urllib.request.ProxyHandler(proxies=proxies)</span><br><span class="line">opener = urllib.request.build_opener(handler)</span><br><span class="line">response = opener.<span class="built_in">open</span>(request)</span><br><span class="line"></span><br><span class="line">content = response.read().decode(<span class="string">&#x27;utf‐8&#x27;</span>)</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;daili.html&#x27;</span>,<span class="string">&#x27;w&#x27;</span>,encoding=<span class="string">&#x27;utf‐8&#x27;</span>)<span class="keyword">as</span> fp:</span><br><span class="line">	fp.write(content)</span><br></pre></td></tr></table></figure></li>
<li>扩展<ul>
<li>代理池</li>
<li>快代理</li>
</ul>
</li>
</ol>
<h2 id="三-解析"><a href="#三-解析" class="headerlink" title="三 解析"></a>三 解析</h2><h3 id="1-XPath"><a href="#1-XPath" class="headerlink" title="1.XPath"></a>1.XPath</h3><ol>
<li>xpath 使用<ul>
<li>注意：提前安装xpath插件<br>  ①打开 chrome 浏览器 –&gt; ②点击右上角小圆点 –&gt; ③更多工具 –&gt; ④扩展程序 –&gt; ⑤拖拽 xpath 插件到扩展程序中 –&gt; ⑥如果 crx 文件失效，需要将后缀修改 zip –&gt; ⑦再次拖拽 –&gt; ⑧关闭浏览器重新打开 –&gt; ⑨ctrl + shift + x –&gt; ⑩出现小黑框</li>
</ul>
<ol>
<li>安装 lxml 库 <figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install lxml ‐i https://pypi.douban.com/simple</span><br></pre></td></tr></table></figure></li>
<li>.导入 lxml.etree <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br></pre></td></tr></table></figure></li>
<li>etree.parse()  解析本地文件 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">html_tree = etree.parse(<span class="string">&#x27;XX.html&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
<li>etree.HTML()  服务器响应文件 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">html_tree = etree.HTML(response.read().decode(<span class="string">&#x27;utf‐8&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
<li>html_tree.xpath(xpath路径)</li>
</ol>
</li>
<li>xpath 基本语法<ol>
<li>路径查询<ul>
<li>&#x2F;&#x2F;：查找所有子孙节点，不考虑层级关系</li>
<li>&#x2F; ：找直接子节点</li>
</ul>
</li>
<li>.谓词查询<ul>
<li>&#x2F;&#x2F;div[@id]</li>
<li>&#x2F;&#x2F;div[@id&#x3D;”maincontent”]</li>
</ul>
</li>
<li>属性查询<ul>
<li>&#x2F;&#x2F;@class</li>
</ul>
</li>
<li>模糊查询<ul>
<li>&#x2F;&#x2F;div[contains(@id, “he”)]</li>
<li>&#x2F;&#x2F;div[starts‐with(@id, “he”)]</li>
</ul>
</li>
<li>.内容查询<ul>
<li>&#x2F;&#x2F;div&#x2F;h1&#x2F;text()</li>
</ul>
</li>
<li>逻辑运算<ul>
<li>&#x2F;&#x2F;div[@id&#x3D;”head” and @class&#x3D;”s_down”]</li>
<li>&#x2F;&#x2F;title | &#x2F;&#x2F;price</li>
</ul>
</li>
</ol>
</li>
</ol>
<h3 id="2-JsonPath"><a href="#2-JsonPath" class="headerlink" title="2.JsonPath"></a>2.JsonPath</h3><table>
<thead>
<tr>
<th>资料</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="http://blog.csdn.net/luxideyao/article/details/77802389">简单入门</a></td>
</tr>
</tbody></table>
<ol>
<li><p>pip 安装</p>
 <figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install jsonpath</span><br></pre></td></tr></table></figure>
</li>
<li><p>jsonpath 的使用</p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">obj = json.load(<span class="built_in">open</span>(<span class="string">&#x27;json文件&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf‐8&#x27;</span>))</span><br><span class="line">ret = jsonpath.jsonpath(obj, <span class="string">&#x27;jsonpath语法&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="3-BeautifulSoup"><a href="#3-BeautifulSoup" class="headerlink" title="3.BeautifulSoup"></a>3.BeautifulSoup</h3><ol>
<li><p>基本简介</p>
<ul>
<li>BeautifulSoup 简称：bs4</li>
<li>什么是 BeatifulSoup：BeautifulSoup，和 lxml 一样，是一个 html 的解析器，主要功能也是解析和提取数据</li>
<li>优缺点<ul>
<li>缺点：效率没有lxml的效率高</li>
<li>优点：接口设计人性化，使用方便</li>
</ul>
</li>
</ul>
</li>
<li><p>安装以及创建</p>
<ul>
<li>安装  <figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install bs4</span><br></pre></td></tr></table></figure></li>
<li>导入  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br></pre></td></tr></table></figure></li>
<li>创建对象<ul>
<li>服务器响应的文件生成对象  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">soup = BeautifulSoup(response.read().decode(), <span class="string">&#x27;lxml&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
<li>本地文件生成对象  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 注意：默认打开文件的编码格式gbk所以需要指定打开编码格式</span></span><br><span class="line">soup = BeautifulSoup(<span class="built_in">open</span>(<span class="string">&#x27;1.html&#x27;</span>), <span class="string">&#x27;lxml&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
<li><p>节点定位</p>
<pre><code> 1.根据标签名查找节点
     soup.a 【注】只能找到第一个a
         soup.a.name
         soup.a.attrs
 2.函数
     (1).find(返回一个对象)
         find(&#39;a&#39;)：只找到第一个a标签
         find(&#39;a&#39;, title=&#39;名字&#39;)
         find(&#39;a&#39;, class_=&#39;名字&#39;)
     (2).find_all(返回一个列表)
         find_all(&#39;a&#39;) 查找到所有的a
         find_all([&#39;a&#39;, &#39;span&#39;]) 返回所有的a和span
         find_all(&#39;a&#39;, limit=2) 只找前两个a
     (3).select(根据选择器得到节点对象)【推荐】
         1.element
             eg:p
         2..class
             eg:.firstname
         3.#id
             eg:#firstname
         4.属性选择器
             [attribute]
                 eg:li = soup.select(&#39;li[class]&#39;)
             [attribute=value]
                 eg:li = soup.select(&#39;li[class=&quot;hengheng1&quot;]&#39;)
         5.层级选择器
             element element
                 div p
             element&gt;element
                 div&gt;p
             element,element
                 div,p
                     eg:soup = soup.select(&#39;a,span&#39;)
</code></pre>
</li>
<li><p>节点信息</p>
<ul>
<li>获取节点内容：适用于标签中嵌套标签的结构<ul>
<li>obj.string</li>
<li>obj.get_text()【推荐】</li>
</ul>
</li>
<li>节点的属性<ul>
<li>tag.name：获取标签名  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tag = find(<span class="string">&#x27;li)</span></span><br><span class="line"><span class="string">print(tag.name)</span></span><br></pre></td></tr></table></figure></li>
<li>tag.attrs：将属性值作为一个字典返回</li>
</ul>
</li>
<li>获取节点属性<ul>
<li>obj.attrs.get(‘title’)【常用】</li>
<li>obj.get(‘title’)</li>
<li>obj[‘title’]</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="四-真实浏览器交互"><a href="#四-真实浏览器交互" class="headerlink" title="四 真实浏览器交互"></a>四 真实浏览器交互</h2><h3 id="1-Selenium"><a href="#1-Selenium" class="headerlink" title="1.Selenium"></a>1.Selenium</h3><ol>
<li><p>什么是 Selenium</p>
<ul>
<li>Selenium 是一个用于 Web 应用程序测试的工具</li>
<li>Selenium 测试直接运行在浏览器中，就像真正的用户在操作一样</li>
<li>支持通过各种 driver（FirfoxDriver，IternetExplorerDriver，OperaDriver，ChromeDriver）驱动真实浏览器完成测试</li>
<li>Selenium 也是支持无界面浏览器操作的</li>
</ul>
</li>
<li><p>为什么使用 Selenium</p>
<ul>
<li>模拟浏览器功能，自动执行网页中的 js 代码，实现动态加载</li>
</ul>
</li>
<li><p>如何安装 Selenium</p>
<ul>
<li>操作谷歌浏览器驱动下载</li>
<li>谷歌驱动和谷歌浏览器版本之间的映射表：<a target="_blank" rel="noopener" href="http://blog.csdn.net/huilan_same/article/details/51896672">映射表</a></li>
<li>查看谷歌浏览器版本<ul>
<li>谷歌浏览器右上角 –&gt; 帮助 –&gt; 关于</li>
</ul>
</li>
<li>pip install selenium</li>
</ul>
</li>
<li><p>Selenium 的使用步骤</p>
<ul>
<li>导入  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span>  webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.chrome.service <span class="keyword">import</span> Service</span><br></pre></td></tr></table></figure></li>
<li>创建谷歌浏览器操作对象  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ser=Service(<span class="string">&#x27;谷歌浏览器驱动文件路径&#x27;</span>)</span><br><span class="line">browser=webdriver.Chrome(service=ser)</span><br></pre></td></tr></table></figure></li>
<li>访问网址  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">url = 要访问的网址</span><br><span class="line">browser.get(url)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>Selenium 的元素定位<br> 元素定位：自动化要做的就是模拟鼠标和键盘来操作来操作这些元素，点击、输入等等。操作这些元素前首先要找到它们，WebDriver 提供很多定位元素的方法，<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_51637785/article/details/125509483">最新方法</a></p>
<table>
<thead>
<tr>
<th>方法（以下方法都被弃用）</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td>find_element_by_id</td>
<td>button &#x3D; browser.find_element_by_id(‘su’)</td>
</tr>
<tr>
<td>find_elements_by_name</td>
<td>name &#x3D; browser.find_element_by_name(‘wd’)</td>
</tr>
<tr>
<td>find_elements_by_xpath</td>
<td>xpath1 &#x3D; browser.find_elements_by_xpath(‘&#x2F;&#x2F;input[@id&#x3D;”su”]’)</td>
</tr>
<tr>
<td>find_elements_by_tag_name</td>
<td>names &#x3D; browser.find_elements_by_tag_name(‘input’)</td>
</tr>
<tr>
<td>find_elements_by_css_selector</td>
<td>my_input &#x3D; browser.find_elements_by_css_selector(‘#kw’)[0]</td>
</tr>
<tr>
<td>find_elements_by_link_text</td>
<td>browser.find_element_by_link_text(“新闻”)</td>
</tr>
</tbody></table>
</li>
<li><p>访问元素信息</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>.get_attribute(‘class’)</td>
<td>获取元素属性</td>
</tr>
<tr>
<td>.text</td>
<td>获取元素文本</td>
</tr>
<tr>
<td>.tag_name</td>
<td>获取标签名</td>
</tr>
</tbody></table>
</li>
<li><p>交互</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>click()</td>
<td>点击</td>
</tr>
<tr>
<td>send_keys()</td>
<td>输入</td>
</tr>
<tr>
<td>browser.back()</td>
<td>后退操作</td>
</tr>
<tr>
<td>browser.forword()</td>
<td>前进操作</td>
</tr>
<tr>
<td>js&#x3D;’document.documentElement.scrollTop&#x3D;100000’（此方法无效）</td>
<td>模拟JS滚动</td>
</tr>
<tr>
<td>browser.execute_script(js代码)</td>
<td>执行js代码</td>
</tr>
<tr>
<td>page_source</td>
<td>获取网页代码</td>
</tr>
<tr>
<td>browser.quit()</td>
<td>退出</td>
</tr>
</tbody></table>
</li>
</ol>
<h3 id="2-Phantomjs"><a href="#2-Phantomjs" class="headerlink" title="2.Phantomjs"></a>2.Phantomjs</h3><ol>
<li>什么是 Phantomjs<ul>
<li>是一个无界面的浏览器</li>
<li>支持页面元素查找，js 的执行等</li>
<li>由于不进行 css 和 gui 渲染，运行效率要比真实的浏览器要快很多</li>
<li>由于合伙人问题，Phantomjs 已经停止更新</li>
</ul>
</li>
<li>如何使用 Phantomjs<ul>
<li>获取 PhantomJS.exe 文件路径 path</li>
<li>browser &#x3D; webdriver.PhantomJS(path)</li>
<li>browser.get(url)</li>
<li>扩展：保存屏幕快照:browser.save_screenshot(‘baidu.png’)</li>
</ul>
</li>
</ol>
<h3 id="3-Chrome-handless"><a href="#3-Chrome-handless" class="headerlink" title="3.Chrome handless"></a>3.Chrome handless</h3><ol>
<li>Chrome-headless 模式， Google 针对 Chrome 浏览器 59版 新增加的一种模式，可以让你不打开 UI 界面的情况下使用 Chrome 浏览器，所以运行效果与 Chrome 保持完美一致</li>
<li>系统要求<ul>
<li>Chrome<ul>
<li>Unix\Linux 系统需要 chrome &gt;&#x3D; 59</li>
<li>Windows 系统需要 chrome &gt;&#x3D; 60</li>
</ul>
</li>
<li>Python3.6</li>
<li>Selenium&#x3D;&#x3D;3.4.*</li>
<li>ChromeDriver&#x3D;&#x3D;2.31</li>
</ul>
</li>
<li>配置 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.chrome.options <span class="keyword">import</span> Options</span><br><span class="line"></span><br><span class="line">chrome_options = Options()</span><br><span class="line">chrome_options.add_argument(<span class="string">&#x27;--headless&#x27;</span>)</span><br><span class="line">chrome_options.add_argument(<span class="string">&#x27;--disable‐gpu&#x27;</span>)</span><br><span class="line">path = <span class="string">r&#x27;C:\Program Files (x86)\Google\Chrome\Application\chrome.exe&#x27;</span></span><br><span class="line">chrome_options.binary_location = path</span><br><span class="line">browser = webdriver.Chrome(options=chrome_options)</span><br><span class="line"></span><br><span class="line">browser.get(<span class="string">&#x27;http://www.baidu.com/&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
<li>配置封装 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="comment">#这个是浏览器自带的 不需要我们再做额外的操作</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.chrome.options <span class="keyword">import</span> Options</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">share_browser</span>():</span><br><span class="line">	<span class="comment">#初始化</span></span><br><span class="line">	chrome_options = Options()</span><br><span class="line">	chrome_options.add_argument(<span class="string">&#x27;‐‐headless&#x27;</span>)</span><br><span class="line">	chrome_options.add_argument(<span class="string">&#x27;‐‐disable‐gpu&#x27;</span>)</span><br><span class="line">	<span class="comment">#浏览器的安装路径 打开文件位置</span></span><br><span class="line">	<span class="comment">#这个路径是你谷歌浏览器的路径</span></span><br><span class="line">	path = <span class="string">r&#x27;C:\Program Files (x86)\Google\Chrome\Application\chrome.exe&#x27;</span></span><br><span class="line">	chrome_options.binary_location = path</span><br><span class="line">	browser = webdriver.Chrome(chrome_options=chrome_options)</span><br><span class="line">	<span class="keyword">return</span> browser</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 封装调用</span></span><br><span class="line"><span class="keyword">from</span> handless <span class="keyword">import</span> share_browser</span><br><span class="line">browser = share_browser()</span><br><span class="line">browser.get(<span class="string">&#x27;http://www.baidu.com/&#x27;</span>)</span><br><span class="line">browser.save_screenshot(<span class="string">&#x27;handless1.png&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="五-requests"><a href="#五-requests" class="headerlink" title="五 requests"></a>五 requests</h2><h3 id="1-基本使用"><a href="#1-基本使用" class="headerlink" title="1.基本使用"></a>1.基本使用</h3><ol>
<li>文档<ul>
<li><a target="_blank" rel="noopener" href="http://cn.python-requests.org/zh_CN/latest/">官方文档</a></li>
<li><a target="_blank" rel="noopener" href="http://cn.python-requests.org/zh_CN/latest/user/quickstart.html">快速上手</a></li>
</ul>
</li>
<li>安装 <figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install requests</span><br></pre></td></tr></table></figure></li>
<li>response 的属性以及类型<ul>
<li>类型：models.Response</li>
<li>属性<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>r.text</td>
<td>获取网站源码</td>
</tr>
<tr>
<td>r.encoding</td>
<td>访问或定制编码方式</td>
</tr>
<tr>
<td>r.url</td>
<td>获取请求的 url</td>
</tr>
<tr>
<td>r.content</td>
<td>响应的字节类型</td>
</tr>
<tr>
<td>r.status_code</td>
<td>响应的状态码</td>
</tr>
<tr>
<td>r.headers</td>
<td>响应的头信息</td>
</tr>
</tbody></table>
</li>
</ul>
</li>
</ol>
<h3 id="2-get-请求"><a href="#2-get-请求" class="headerlink" title="2.get 请求"></a>2.get 请求</h3><ol>
<li>requests.get() <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">url = <span class="string">&#x27;http://www.baidu.com/s?&#x27;</span></span><br><span class="line">headers = &#123;</span><br><span class="line">	<span class="string">&#x27;User‐Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/65.0.3325.181 Safari/537.36&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">data = &#123;</span><br><span class="line">	<span class="string">&#x27;wd&#x27;</span>:<span class="string">&#x27;北京&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">response = requests.get(url,params=data,headers=headers)</span><br></pre></td></tr></table></figure></li>
<li>定制参数<ul>
<li>参数使用 params 传递</li>
<li>参数无需 urlencode 编码</li>
<li>不需要请求对象的定制</li>
<li>请求资源路径中 ? 可加可不加</li>
</ul>
</li>
</ol>
<h3 id="3-post请求"><a href="#3-post请求" class="headerlink" title="3.post请求"></a>3.post请求</h3><ol>
<li>requests.post() <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 百度翻译</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">post_url = <span class="string">&#x27;http://fanyi.baidu.com/sug&#x27;</span></span><br><span class="line">headers=&#123;</span><br><span class="line">	<span class="string">&#x27;User‐Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36(KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">data = &#123;</span><br><span class="line">	<span class="string">&#x27;kw&#x27;</span>: <span class="string">&#x27;eye&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">r = requests.post(url = post_url,headers=headers,data=data)</span><br></pre></td></tr></table></figure></li>
<li>get 和 post 区别<ul>
<li>get 请求的参数名字是 params ，post 请求的参数的名字是 data</li>
<li>请求资源路径后面可以不加 ?</li>
<li>不需要手动编解码</li>
<li>不需要做请求对象的定制</li>
</ul>
</li>
</ol>
<h3 id="4-代理"><a href="#4-代理" class="headerlink" title="4.代理"></a>4.代理</h3><ol>
<li>proxy 定制<br> 在请求中设置 proxies 参数<br> 参数类型是一个字典类型 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">url = <span class="string">&#x27;http://www.baidu.com/s?&#x27;</span></span><br><span class="line">headers = &#123;</span><br><span class="line">	<span class="string">&#x27;user‐agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/65.0.3325.181 Safari/537.36&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">data = &#123;</span><br><span class="line">	<span class="string">&#x27;wd&#x27;</span>:<span class="string">&#x27;ip&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">proxy = &#123;</span><br><span class="line">	<span class="string">&#x27;http&#x27;</span>:<span class="string">&#x27;219.149.59.250:9797&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">r = requests.get(url=url,params=data,headers=headers,proxies=proxy)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;proxy.html&#x27;</span>,<span class="string">&#x27;w&#x27;</span>,encoding=<span class="string">&#x27;utf‐8&#x27;</span>) <span class="keyword">as</span> fp:</span><br><span class="line">	fp.write(r.text)</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="5-cookie-定制"><a href="#5-cookie-定制" class="headerlink" title="5.cookie 定制"></a>5.cookie 定制</h3><ol>
<li>应用案例<ul>
<li>古诗文网（需要验证）</li>
<li>云打码平台<ul>
<li>用户登陆 actionuser action</li>
<li>开发者登陆 actioncode action</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="六-scrapy"><a href="#六-scrapy" class="headerlink" title="六 scrapy"></a>六 scrapy</h2><h3 id="1-scrapy"><a href="#1-scrapy" class="headerlink" title="1.scrapy"></a>1.scrapy</h3><h4 id="①scrapy-介绍"><a href="#①scrapy-介绍" class="headerlink" title="①scrapy 介绍"></a>①scrapy 介绍</h4><ol>
<li><p>scrapy 是什么</p>
<ul>
<li>Scrapy 是一个为了爬取网站数据，提取结构性数据而编写的应用框架。 可以应用在包括数据挖掘，信息处理或存储历史数据等一系列的程序中</li>
</ul>
</li>
<li><p>安装</p>
<pre><code> 安装 scrapy：
     pip install scrapy
 安装过程中出错：
     如果安装有错误！！！！
     pip install Scrapy
     building &#39;twisted.test.raiser&#39; extension
     error: Microsoft Visual C++ 14.0 is required. Get it with &quot;Microsoft Visual C++ Build Tools&quot;: http://landinghub.visualstudio.com/visual‐cpp‐build‐tools
 解决方案：
     http://www.lfd.uci.edu/~gohlke/pythonlibs/#twisted
     下载twisted对应版本的 whl 文件（如我的 Twisted‐17.5.0‐cp36‐cp36m‐win_amd64.whl），cp 后面是 python 版本，amd64 代表 64 位，运行命令：
         pip install C:\Users\...\Twisted‐17.5.0‐cp36‐cp36m‐win_amd64.whl
         pip install Scrapy
 如果再报错
     python ‐m pip install ‐‐upgrade pip
 如果再报错	win32
 解决方法：
     pip install pypiwin32
 再报错：使用 anaconda
     使用步骤：
         打开 anaconda
         点击 environments
         点击 not installed
         输入 scrapy
         apply
         在 pycharm 中选择 anaconda 的环境
</code></pre>
</li>
</ol>
<h4 id="②scrapy-项目的创建以及运行"><a href="#②scrapy-项目的创建以及运行" class="headerlink" title="②scrapy 项目的创建以及运行"></a>②scrapy 项目的创建以及运行</h4><ol>
<li>创建 scrapy 项目<ul>
<li>终端输入：scrapy startproject 项目名称</li>
</ul>
</li>
<li>项目组成<ul>
<li>spiders<ul>
<li>__init__.py</li>
<li>自定义的爬虫文件.py	–&gt;	由我们自己创建，是实现爬虫核心功能的文件</li>
</ul>
</li>
<li>__init__.py</li>
<li>items.py	–&gt;	定义数据结构的地方，是一个继承自 scrapy.Item 的类</li>
<li>middlewares.py	–&gt;	中间件 代理</li>
<li>pipelines.py	–&gt;	管道文件，里面只有一个类，用于处理下载数据的后续处理。默认是 300 优先级，值越小优先级越高（1‐1000）</li>
<li>settings.py	–&gt;	配置文件 比如：是否遵守 robots 协议，User‐Agent 定义等</li>
</ul>
</li>
<li>创建爬虫文件<ul>
<li>跳转到 spiders 文件夹：cd 目录名字&#x2F;目录名字&#x2F;spiders</li>
<li>scrapy genspider 爬虫名字 网页的域名</li>
</ul>
</li>
<li>爬虫文件的基本组成<br> 继承 scrapy.Spider 类<ul>
<li>name &#x3D; ‘baidu’	–&gt;	运行爬虫文件时使用的名字</li>
<li>allowed_domains	–&gt;	爬虫允许的域名，在爬取的时候，如果不是此域名之下的<br>url ，会被过滤掉</li>
<li>start_urls	–&gt;	声明了爬虫的起始地址，可以写多个 url ，一般是一个</li>
<li>parse(self, response)	–&gt;	解析数据的回调函数<ul>
<li>response.text	–&gt;	响应的是字符串</li>
<li>response.body	–&gt;	响应的是二进制文件</li>
<li>response.xpath()	–&gt;	xpath 方法的返回值类型是 selector 列表</li>
<li>extract()	–&gt;	提取的是 selector 对象的是 data</li>
<li>extract_first()	–&gt;	提取的是 selector 列表中的第一个数据</li>
</ul>
</li>
</ul>
</li>
<li>运行爬虫文件<ul>
<li>scrapy crawl 爬虫名称</li>
<li>注意：应在spiders文件夹内执行</li>
</ul>
</li>
</ol>
<h4 id="③scrapy-架构组成"><a href="#③scrapy-架构组成" class="headerlink" title="③scrapy 架构组成"></a>③scrapy 架构组成</h4><ol>
<li>引擎<ul>
<li>自动运行，无需关注，会自动组织所有的请求对象，分发给下载器</li>
</ul>
</li>
<li>下载器<ul>
<li>从引擎处获取到请求对象后，请求数据</li>
</ul>
</li>
<li>spiders<ul>
<li>Spider 类定义了如何爬取某个(或某些)网站。包括了爬取的动作(例如:是否跟进链接)以及如何从网页的内容中提取结构化数据(爬取 item )。 换句话说，Spider 就是您定义爬取的动作及分析某个网页(或者是有些网页)的地方</li>
</ul>
</li>
<li>调度器<ul>
<li>有自己的调度规则，无需关注</li>
</ul>
</li>
<li>管道（Item pipeline） <ul>
<li>最终处理数据的管道，会预留接口供我们处理数据</li>
<li>当 Item 在 Spider 中被收集之后，它将会被传递到 Item Pipeline ，一些组件会按照一定的顺序执行对 Item 的处理。每个 item pipeline 组件(有时称之为“Item Pipeline”)是实现了简单方法的 Python 类。他们接收到 Item 并通过它执行一些行为，同时也决定此 Item 是否继续通过 pipeline，或是被丢弃而不再进行处理</li>
<li>以下是 item pipeline 的一些典型应用<ul>
<li>清理 HTML 数据</li>
<li>验证爬取的数据(检查 item 包含某些字段)</li>
<li>查重(并丢弃)</li>
<li>将爬取结果保存到数据库中</li>
</ul>
</li>
</ul>
</li>
</ol>
<h4 id="④scrapy-工作原理"><a href="#④scrapy-工作原理" class="headerlink" title="④scrapy 工作原理"></a>④scrapy 工作原理</h4><ol>
<li>简图<br> <img src="https://img-blog.csdnimg.cn/7fb4b9dcb2d64f0e861545d3418cd49d.png" alt="在这里插入图片描述"></li>
<li>详细图<br> <img src="https://img-blog.csdnimg.cn/223af0e1f8ca454c86b5f4c4dc293eaa.png" alt="在这里插入图片描述"></li>
<li>案例<ul>
<li>汽车之家</li>
</ul>
</li>
</ol>
<h3 id="2-scrapy-shell"><a href="#2-scrapy-shell" class="headerlink" title="2.scrapy shell"></a>2.scrapy shell</h3><ol>
<li>什么是 scrapy shell<ul>
<li>Scrapy 终端，是一个交互终端，供您在未启动 spider 的情况下尝试及调试您的爬取代码。 其本意是用来测试提取数据的代码，不过您可以将其作为正常的 Python 终端，在上面测试任何的 Python 代码</li>
<li>该终端是用来测试 XPath 或 CSS 表达式，查看他们的工作方式及从爬取的网页中提取的数据。 在编写您的 spider 时，该终端提供了交互性测试您的表达式代码的功能，免去了每次修改后运行 spider 的麻烦</li>
<li>一旦熟悉了 Scrapy 终端后，您会发现其在开发和调试 spider 时发挥的巨大作用</li>
</ul>
</li>
<li>安装 ipython<ul>
<li>安装：pip install ipython</li>
<li>简介：如果您安装了 IPython ，Scrapy 终端将使用 IPython (替代标准 Python 终端)。 IPython 终端与其他相比更为强大，提供智能的自动补全，高亮输出，及其他特性</li>
</ul>
</li>
<li>应用<ul>
<li>scrapy shell <a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a></li>
<li>scrapy shell <a target="_blank" rel="noopener" href="http://www.baidu.com/">http://www.baidu.com</a></li>
<li>scrapy shell “<a target="_blank" rel="noopener" href="http://www.baidu.com&quot;/">http://www.baidu.com&quot;</a></li>
<li>scrapy shell “<a target="_blank" rel="noopener" href="http://www.baidu.com&quot;/">www.baidu.com&quot;</a></li>
</ul>
</li>
<li>语法<ol>
<li>response 对象<ul>
<li>response.body</li>
<li>response.text</li>
<li>response.url</li>
<li>response.status</li>
</ul>
</li>
<li>response 的解析<ul>
<li>response.xpath()【常用】	–&gt;	使用 xpath 路径查询特定元素，返回一个 selector 列表对象</li>
<li>response.css()	–&gt;	使用 css_selector 查询元素，返回一个 selector 列表对象<ul>
<li>获取内容 ：response.css(‘#su::text’).extract_first()</li>
<li>获取属性 ：response.css(‘#su::attr(“value”)’).extract_first()</li>
</ul>
</li>
</ul>
</li>
<li>selector对象	–&gt;	通过 xpath 方法调用返回的是 seletor 列表<ul>
<li>extract()<ul>
<li>提取 selector 对象的值</li>
<li>如果提取不到值 那么会报错</li>
<li>使用 xpath 请求到的对象是一个 selector 对象，需要进一步使用 extract() 方法拆包，转换为 unicode 字符串</li>
</ul>
</li>
<li>extract_first()<ul>
<li>提取 seletor 列表中的第一个值</li>
<li>如果提取不到值 会返回一个空值</li>
<li>返回第一个解析到的值，如果列表为空，此种方法也不会报错，会返回一个空值</li>
</ul>
</li>
<li>注意：每一个 selector 对象可以再次的去使用 xpath 或者 css 方法</li>
<li>xpath()</li>
<li>css()</li>
</ul>
</li>
</ol>
</li>
</ol>
<h3 id="3-yield"><a href="#3-yield" class="headerlink" title="3.yield"></a>3.yield</h3><ol>
<li>带有 yield 的函数不再是一个普通函数，而是一个生成器 generator ，可用于迭代</li>
<li>yield 是一个类似 return 的关键字，迭代一次遇到 yield 时就返回 yield 后面(右边)的值。重点是：下一次迭代时，从上一次迭代遇到的 yield 后面的代码(下一行)开始执行</li>
<li>简要理解：yield 就是 return 返回一个值，并且记住这个返回的位置，下次迭代就从这个位置后(下一行)开始</li>
<li>案例<ul>
<li>当当网<ul>
<li>①yield	–&gt;	②管道封装	–&gt;	③多条管道下载	–&gt;	④多页数据下载</li>
</ul>
</li>
<li>电影天堂<ul>
<li>一个 item 包含多级页面的数据</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="4-pymysql-与-CrawlSpider"><a href="#4-pymysql-与-CrawlSpider" class="headerlink" title="4.pymysql 与 CrawlSpider"></a>4.pymysql 与 CrawlSpider</h3><ol>
<li><p>Mysql</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://dev.mysql.com/downloads/windows/installer/5.7.html">下载</a></li>
<li><a target="_blank" rel="noopener" href="https://jingyan.baidu.com/album/d7130635f1c77d13fdf475df.html">安装</a></li>
</ul>
</li>
<li><p>pymysql 的使用步骤</p>
<pre><code> pip install pymysql
 pymysql.connect(host,port,user,password,db,charset)
 conn.cursor()
 cursor.execute()
</code></pre>
</li>
<li><p>CrawlSpider</p>
<pre><code> 1.继承自 scrapy.Spider
 2.独门秘笈
     CrawlSpider 可以定义规则，再解析 html 内容的时候，可以根据链接规则提取出指定的链接，然后再向这些链接发送请求
     所以，如果有需要跟进链接的需求，意思就是爬取了网页之后，需要提取链接再次爬取，使用 CrawlSpider 是非常合适的
 3.提取链接
     链接提取器，在这里就可以写规则提取指定链接
 scrapy.linkextractors.LinkExtractor(
         allow = (),	# 正则表达式 提取符合正则的链接
         deny = (),	# (不用)正则表达式 不提取符合正则的链接
         allow_domains = (),	# （不用）允许的域名
         deny_domains = (),	# （不用）不允许的域名
         restrict_xpaths = (),	# xpath，提取符合 xpath 规则的链接
         restrict_css = ()	# 提取符合选择器规则的链接
 )
 4.模拟使用
     正则用法：links1 = LinkExtractor(allow=r&#39;list_23_\d+\.html&#39;)
     xpath用法：links2 = LinkExtractor(restrict_xpaths=r&#39;//div[@class=&quot;x&quot;]&#39;)
     css用法：links3 = LinkExtractor(restrict_css=&#39;.x&#39;)
 5.提取连接
     link.extract_links(response)
 6.注意事项
     【注1】callback只能写函数名字符串, callback=&#39;parse_item&#39;
     【注2】在基本的spider中，如果重新发送请求，那里的callback写的是 callback=self.parse_item 【注‐
 ‐稍后看】follow=true 是否跟进 就是按照提取连接规则进行提取
</code></pre>
</li>
<li><p>CrawlSpider 运行原理<br> <img src="https://img-blog.csdnimg.cn/9578b38b84314774bc743be953261ffb.png" alt="在这里插入图片描述"></p>
</li>
<li><p>CrawlSpider 案例</p>
<ul>
<li><p>需求：读书网数据入库</p>
</li>
<li><p>步骤</p>
<pre><code>  创建项目：scrapy startproject dushuproject
  跳转到spiders路径 cd\dushuproject\dushuproject\spiders
  创建爬虫类：scrapy genspider ‐t crawl read www.dushu.com
  items
  spiders
  settings
  pipelines
          数据保存到本地
          数据保存到 mysql 数据库
</code></pre>
</li>
</ul>
</li>
<li><p>数据入库</p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># settings 配置参数</span></span><br><span class="line">DB_HOST = <span class="string">&#x27;192.168.231.128&#x27;</span></span><br><span class="line">DB_PORT = <span class="number">3306</span></span><br><span class="line">DB_USER = <span class="string">&#x27;root&#x27;</span></span><br><span class="line">DB_PASSWORD = <span class="string">&#x27;1234&#x27;</span></span><br><span class="line">DB_NAME = <span class="string">&#x27;test&#x27;</span></span><br><span class="line">DB_CHARSET = <span class="string">&#x27;utf8&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 管道配置</span></span><br><span class="line"><span class="keyword">from</span> scrapy.utils.project <span class="keyword">import</span> get_project_settings</span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MysqlPipeline</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">	<span class="comment">#__init__方法和open_spider的作用是一样的</span></span><br><span class="line">	<span class="comment">#init是获取settings中的连接参数</span></span><br><span class="line">	<span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">		settings = get_project_settings()</span><br><span class="line">		</span><br><span class="line">		self.host = settings[<span class="string">&#x27;DB_HOST&#x27;</span>]</span><br><span class="line">		self.port = settings[<span class="string">&#x27;DB_PORT&#x27;</span>]</span><br><span class="line">		self.user = settings[<span class="string">&#x27;DB_USER&#x27;</span>]</span><br><span class="line">		self.pwd = settings[<span class="string">&#x27;DB_PWD&#x27;</span>]</span><br><span class="line">		self.name = settings[<span class="string">&#x27;DB_NAME&#x27;</span>]</span><br><span class="line">		self.charset = settings[<span class="string">&#x27;DB_CHARSET&#x27;</span>]</span><br><span class="line">		</span><br><span class="line">		self.connect()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 连接数据库并且获取cursor对象</span></span><br><span class="line">	<span class="keyword">def</span> <span class="title function_">connect</span>(<span class="params">self</span>):</span><br><span class="line">		self.conn = pymysql.connect(host=self.host,</span><br><span class="line">									port=self.port,</span><br><span class="line">									user=self.user,</span><br><span class="line">									password=self.pwd,</span><br><span class="line">									db=self.name,</span><br><span class="line">									charset=self.charset)</span><br><span class="line">									</span><br><span class="line">		self.cursor = self.conn.cursor()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">def</span> <span class="title function_">process_item</span>(<span class="params">self, item, spider</span>):</span><br><span class="line">		sql = <span class="string">&#x27;insert into book(image_url, book_name, author, info) values(&quot;%s&quot;,&quot;%s&quot;, &quot;%s&quot;, &quot;%s&quot;)&#x27;</span> % (item[<span class="string">&#x27;image_url&#x27;</span>], item[<span class="string">&#x27;book_name&#x27;</span>], item[<span class="string">&#x27;author&#x27;</span>], item[<span class="string">&#x27;info&#x27;</span>])</span><br><span class="line">		sql = <span class="string">&#x27;insert into book(image_url,book_name,author,info) values(&quot;&#123;&#125;&quot;,&quot;&#123;&#125;&quot;,&quot;&#123;&#125;&quot;,&quot;&#123;&#125;&quot;)&#x27;</span>.<span class="built_in">format</span>(item[<span class="string">&#x27;image_url&#x27;</span>], item[<span class="string">&#x27;book_name&#x27;</span>], item[<span class="string">&#x27;author&#x27;</span>],item[<span class="string">&#x27;info&#x27;</span>])</span><br><span class="line">		</span><br><span class="line">		<span class="comment"># 执行sql语句</span></span><br><span class="line">		self.cursor.execute(sql)</span><br><span class="line">		self.conn.commit()</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">return</span> item</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">def</span> <span class="title function_">close_spider</span>(<span class="params">self, spider</span>):</span><br><span class="line">		self.conn.close()</span><br><span class="line">		self.cursor.close()</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="5-日志信息和日志等级"><a href="#5-日志信息和日志等级" class="headerlink" title="5.日志信息和日志等级"></a>5.日志信息和日志等级</h3><ol>
<li>日志级别<ul>
<li>CRITICAL：严重错误</li>
<li>ERROR： 一般错误</li>
<li>WARNING： 警告</li>
<li>INFO: 一般信息</li>
<li>DEBUG： 调试信息</li>
</ul>
</li>
<li>cmd 打印日志的原因<ul>
<li>默认的日志等级是 DEBUG</li>
<li>只要出现了 DEBUG 或者 DEBUG 以上等级的日志</li>
<li>那么这些日志将会打印</li>
</ul>
</li>
<li>settings.py 文件设置<ul>
<li>默认的级别为 DEBUG ，会显示上面所有的信息</li>
<li>在配置文件中 settings.py<ul>
<li>LOG_FILE ：将屏幕显示的信息全部记录到文件中，屏幕不再显示，注意文件后缀一定是 .log</li>
<li>LOG_LEVEL ：设置日志显示的等级，就是显示哪些，不显示哪些</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="6-scrapy-的-post-请求与代理"><a href="#6-scrapy-的-post-请求与代理" class="headerlink" title="6.scrapy 的 post 请求与代理"></a>6.scrapy 的 post 请求与代理</h3><ol>
<li><p>scrapy 的 post 请求</p>
<pre><code> （1）重写start_requests方法：
         def start_requests(self)
 （2）start_requests的返回值：
         scrapy.FormRequest(url=url, headers=headers, callback=self.parse_item, formdata=data)
                 url: 要发送的post地址
                 headers：可以定制头信息
                 callback: 回调函数
                 formdata: post所携带的数据，这是一个字典
</code></pre>
</li>
<li><p>代理</p>
<pre><code> （1）到settings.py中，打开一个选项
     DOWNLOADER_MIDDLEWARES = &#123;
         &#39;postproject.middlewares.Proxy&#39;: 543,
     &#125;
 （2）到middlewares.py中写代码
     def process_request(self, request, spider):
         request.meta[&#39;proxy&#39;] = &#39;https://113.68.202.10:9999&#39;
         return None
</code></pre>
</li>
</ol>

            </div>

            <!-- Post Comments -->
            
    <!-- 使用 DISQUS_CLICK -->
<div id="disqus-comment">
    <div id="disqus_thread"></div>

<!-- add animation -->
<style>
	.disqus_click_btn {
            line-height: 30px;
            margin: 0;
            min-width: 50px;
            padding: 0 14px;
            display: inline-block;
            font-family: "Roboto", "Helvetica", "Arial", sans-serif;
            font-size: 14px;
            font-weight: 400;
            text-transform: uppercase;
            letter-spacing: 0;
            overflow: hidden;
            will-change: box-shadow;
            transition: box-shadow .2s cubic-bezier(.4, 0, 1, 1), background-color .2s cubic-bezier(.4, 0, .2, 1), color .2s cubic-bezier(.4, 0, .2, 1);
            outline: 0;
            cursor: pointer;
            text-decoration: none;
            text-align: center;
            vertical-align: middle;
            border: 0;
            background: rgba(158, 158, 158, .2);
            box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .14), 0 3px 1px -2px rgba(0, 0, 0, .2), 0 1px 5px 0 rgba(0, 0, 0, .12);
            color: #fff;
            background-color: #7EC0EE;
            text-shadow: 0
        }
</style>
	
<div class="btn_click_load" id="disqus_bt"> 
    <button class="disqus_click_btn">点击查看评论</button>
</div>

<!--
<script type="text/javascript">
$('.btn_click_load').click(function() {
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'http-miccall-tech'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    document.getElementById('disqus_bt').style.display = "none";
});
</script>
-->
<script type="text/javascript">
    var disqus_config = function () {
        this.page.url = 'http://example.com/2023/02/25/Python/';  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = 'http://example.com/2023/02/25/Python/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
</script>

<script type="text/javascript">
    $('.btn_click_load').click(function() {  //click to load comments
        (function() { // DON'T EDIT BELOW THIS LINE
            var d = document;
            var s = d.createElement('script');
            s.src = '//http-miccall-tech.disqus.com/embed.js';
            s.setAttribute('data-timestamp', + new Date());
            (d.head || d.body).appendChild(s);
        })();
        $('.btn_click_load').css('display','none');
    });
</script>
</div>
<style>
    #disqus-comment{
        background-color: #eee;
        padding: 2pc;
    }
</style>


        </div>
        <!-- Copyright 版权 start -->
                <div id="copyright">
            <ul>
                <li>&copy;Powered By <a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/" style="border-bottom: none;">hexo</a></li>
                <li>Design: <a target="_blank" rel="noopener" href="http://miccall.tech " style="border-bottom: none;">miccall</a></li>
            </ul>
            
                <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
			
        </div>
    </div>
</body>



 	
</html>
